(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a88bd000"],{"1c32":function(t,e,a){"use strict";var s=a("7d4b"),i=a.n(s);i.a},"7d4b":function(t,e,a){},c5d4:function(t,e,a){},cec7:function(t,e,a){"use strict";var s=a("c5d4"),i=a.n(s);i.a},e382:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"commonContent"},[a("a-form",{staticClass:"commomForm",attrs:{form:t.form},on:{submit:t.handleSearch}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"登录名","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{attrs:{placeholder:"登录名"},model:{value:t.listQuery.login,callback:function(e){t.$set(t.listQuery,"login",e)},expression:"listQuery.login"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"姓名","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-input",{attrs:{placeholder:"姓名"},model:{value:t.listQuery.name,callback:function(e){t.$set(t.listQuery,"name",e)},expression:"listQuery.name"}})],1)],1),a("a-col",{style:{display:this.expand?"block":"none"},attrs:{span:8}},[a("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:"0"},on:{change:t.handleChange},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("停用")]),a("a-select-option",{attrs:{value:"1"}},[t._v("启用")])],1)],1)],1),a("a-col",{style:{textAlign:"right",paddingRight:"20px"},attrs:{span:this.expand?24:8}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.getList}},[t._v("\n            搜  索\n          ")]),a("a-button",{style:{marginLeft:"8px"},attrs:{icon:"redo"},on:{click:t.handleReset}},[t._v("\n            重  置\n          ")]),a("a",{style:{marginLeft:"8px",fontSize:"12px"},on:{click:t.toggle}},[a("a-label",{attrs:{label:"dsdfd"}},[t._v(t._s(t.expand?"收起":"展开"))]),a("a-icon",{attrs:{type:t.expand?"up":"down"}})],1)],1)],1)],1)],1),a("div",{staticClass:"search-result-list"},[a("div",{staticClass:"table-operations"},[a("a-button",{staticStyle:{margin:"0"},attrs:{type:"dashed",block:""},on:{click:function(e){return t.createlist()}}},[t._v("+ 新增")])],1),a("a-table",{attrs:{columns:t.columns,dataSource:t.list,bordered:"",pagination:t.pagination},scopedSlots:t._u([{key:"status",fn:function(e){return a("span",{},[a("a-badge",{attrs:{status:"1"==e?"success":"error"}}),t._v("\n            "+t._s(t.statusmap[e])+"\n        ")],1)}},{key:"operation",fn:function(e,s){return a("span",{},[a("a",{on:{click:function(e){return t.showlist(s)}}},[t._v("查看")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-dropdown",[a("a",{staticClass:"ant-dropdown-link",attrs:{href:"javascript:;"}},[t._v("\n          更多 "),a("a-icon",{attrs:{type:"down"}})],1),a("a-menu",{attrs:{slot:"overlay"},slot:"overlay"},[a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.update(s)}}},[t._v("修改")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.deletList(s)}}},[t._v("删除")])]),a("a-menu-item",[a("a",{attrs:{href:"javascript:;"},on:{click:function(e){return t.resetpasswd(s)}}},[t._v("重置密码")])])],1)],1)],1)}}])})],1),a("edit",{ref:"edit",on:{fresh:t.fresh}}),a("create",{ref:"create",on:{fresh:t.fresh}})],1)},i=[],n=a("8593"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-drawer",{attrs:{placement:"right",closable:!0,visible:t.showVisible,width:"1100px"},on:{close:t.onClose}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:"form"}}),t._v("  "+t._s(t.dialogTypeMap[t.dialogType])+"\n\n\t\t")],1),a("a-tabs",[a("a-tab-pane",{attrs:{tab:"用户信息"}},[a("a-form",{attrs:{form:t.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"登录名","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{type:"hidden",placeholder:"请输入登录名",disabled:t.disabled}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["login",t.rule.login],expression:"['login',rule.login]"}],attrs:{placeholder:"请输入登录名",disabled:t.disabled}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"姓名","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",t.rule.name],expression:"['name',rule.name]"}],attrs:{placeholder:"请输入姓名",disabled:t.disabled}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"状态","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",t.rule.status],expression:"['status',rule.status]"}],attrs:{disabled:t.disabled}},[a("a-radio",{attrs:{value:"0"}},[t._v("禁用")]),a("a-radio",{attrs:{value:"1"}},[t._v("启用")])],1)],1)],1)],1)],1)],1)],1),a("a-tabs",[a("a-tab-pane",{attrs:{tab:" 角色信息 "}},[a("a-table",{staticStyle:{"margin-bottom":"50px"},attrs:{columns:t.columns,dataSource:t.list,bordered:"",pagination:t.pagination,loading:t.loading},scopedSlots:t._u([{key:"status",fn:function(e){return a("span",{},[a("a-badge",{attrs:{status:"1"==e?"success":"error"}}),t._v("\n\t\t\t\t     "+t._s(t._f("statusFilter")(e))+"\n\n\t\t\t\t ")],1)}}])})],1)],1),a("div",{staticClass:"modeButton"},[a("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v("\n        取消\n      ")]),a("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(t._s(t.SubmitTypeMap[t.dialogType]))])],1)],1)},r=[],l={filters:{statusFilter:function(t){var e={1:"启用",0:"禁用"};return e[t]}},data:function(){var t=this;return{iconType:"from",form:this.$form.createForm(this),dialogTypeMap:{show:"用户详情",create:"用户新增",update:"用户修改"},hackRest:!1,SubmitTypeMap:{show:"确认",create:"提交",update:"提交"},showVisible:!1,rule:{login:{rules:[{required:!0,message:"请输入用户名"}],initialValue:""},name:{rules:[{required:!0,message:"请输入姓名"}],initialValue:""},status:{rules:[{required:!0,message:"请选择状态"}],initialValue:"1"}},columns:[{title:"角色ID",dataIndex:"id",align:"center"},{title:"角色名称",dataIndex:"name",align:"center"},{title:"角色描述",dataIndex:"desc",align:"center"},{title:"角色状态",dataIndex:"status",align:"center",scopedSlots:{customRender:"status"}}],list:[],pagination:{total:0,defaultPageSize:5,showTotal:function(t){return"共 ".concat(t," 条数据")},showSizeChanger:!0,pageSizeOptions:["5","10","15","20"],onChange:function(e,a){t.pagechage(e,a)},onShowSizeChange:function(e,a){t.pageSizeChange(a)}}}},props:{showVisible:Boolean},methods:{ShowDialog:function(t){var e=this;this.disabled=!0,this.showVisible=!0,this.dialogType="show",this.getList(t),this.$nextTick(function(){e.form.setFieldsValue(t)})},getList:function(t){var e=this;this.loading=!0,Object(n["o"])({userId:t.id}).then(function(t){"0000"==t.data.code?(e.loading=!1,console.log(t),e.list=t.data.extend.list,e.pagination.total=t.data.extend.total):(e.loading=!1,e.$message.error(t.data.message))})},onClose:function(){this.showVisible=!1,this.form.resetFields()},onSubmit:function(){"show"==this.dialogType&&(this.showVisible=!1),"create"==this.dialogType&&this.create(),"update"==this.dialogType&&this.update()}}},c=l,u=a("2877"),d=Object(u["a"])(c,o,r,!1,null,null,null),p=d.exports,h=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-drawer",{attrs:{placement:"right",closable:t.showCanel,visible:t.showVisible,width:"1100px"},on:{close:t.onClose}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:t.iconType}}),t._v("  "+t._s(t.title)+"\n\t\t\t")],1),a("a-steps",{attrs:{size:"small",current:t.current,status:t.stepstatus}},[a("a-step",{attrs:{title:"第一步"}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v(t._s(t.title))])]),a("a-step",{attrs:{title:"第二步"}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("角色管理")])]),a("a-step",{attrs:{title:"结束"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==t.current,expression:"current==0"}],staticClass:"stepContent"},[a("a-form",{staticClass:"ant-advanced-search-form",staticStyle:{border:"none"},attrs:{form:t.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"登录名","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id"],expression:"['id']"}],attrs:{type:"hidden",placeholder:"请输入登录名",disabled:t.disabled}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["login",t.rule.login],expression:"['login',rule.login]"}],attrs:{placeholder:"请输入登录名",disabled:t.disabled}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"姓名","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["name",t.rule.name],expression:"['name',rule.name]"}],attrs:{placeholder:"请输入姓名",disabled:t.disabled}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"状态","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-radio-group",{directives:[{name:"decorator",rawName:"v-decorator",value:["status",t.rule.status],expression:"['status',rule.status]"}],attrs:{disabled:t.disabled}},[a("a-radio",{attrs:{value:"0"}},[t._v("禁用")]),a("a-radio",{attrs:{value:"1"}},[t._v("启用")])],1)],1)],1)],1)],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:1==t.current,expression:"current==1"}],staticClass:"stepContent"},[a("a-form",{staticClass:"ant-advanced-search-form",staticStyle:{border:"none"},on:{submit:function(t){}}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"角色名","label-col":{span:5},"wrapper-col":{span:19}}},[a("a-input",{attrs:{placeholder:"角色名"},model:{value:t.query.login,callback:function(e){t.$set(t.query,"login",e)},expression:"query.login"}})],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-item",{attrs:{label:"状态","label-col":{span:5},"wrapper-col":{span:19}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:"0",placeholder:"请选择状态",allowClear:"true"},on:{change:t.handleChange},model:{value:t.query.status,callback:function(e){t.$set(t.query,"status",e)},expression:"query.status"}},[a("a-select-option",{attrs:{value:"0"}},[t._v("禁用")]),a("a-select-option",{attrs:{value:"1"}},[t._v("启用")])],1)],1)],1),a("a-col",{style:{textAlign:"right",paddingRight:"20px"},attrs:{span:"8"}},[a("a-form-item",[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:t.getList}},[t._v("\n\t\t\t\t\t    搜  索\n\t\t\t\t\t  ")]),a("a-button",{style:{marginLeft:"8px"},attrs:{icon:"redo"},on:{click:t.handleReset}},[t._v("\n\t\t\t\t\t    重  置\n\t\t\t\t\t  ")])],1)],1)],1)],1),a("a-table",{attrs:{rowKey:"id",rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.columns,dataSource:t.list,bordered:"",pagination:t.pagination},scopedSlots:t._u([{key:"status",fn:function(e){return a("span",{},[a("a-badge",{attrs:{status:"0"==e?"success":"error"}}),t._v("\n\t\t\t\t\t     "+t._s(t._f("statusFilter")(e))+"\t\n\t\t\t\t\t ")],1)}}])})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:2==t.current,expression:"current==2"}],staticClass:"stepContent",staticStyle:{"text-align":"center",marginTop:"30px"}},[a("a-icon",{staticStyle:{color:"green","font-size":"50px",marginBottom:"10px"},attrs:{type:"check-circle"}}),a("p",{staticStyle:{"font-size":"25px"}},[t._v(t._s("create"==this.dialogType?"新增成功":"修改成功"))])],1),a("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},[a("a-button",{directives:[{name:"show",rawName:"v-show",value:2!=t.current,expression:"current!=2"}],style:{marginRight:"5px"},attrs:{type:"primary"},on:{click:t.submitCreate}},[t._v("\n\t\t\t\t\t\t   提交\n\t\t\t\t")]),a("a-button",{directives:[{name:"show",rawName:"v-show",value:t.showNext,expression:"showNext"}],style:{marginRight:"5px"},attrs:{type:"success"},on:{click:t.goNext}},[t._v("\n\t\t\t\t\t\t   跳过\n\t\t\t\t")]),t.showCanel?a("a-button",{style:{marginRight:"8px"},on:{click:t.onClose}},[t._v(" "+t._s(t.canelTitle)+" ")]):t._e()],1)],1),a("bounced",{ref:"bounced",on:{showId:t.showId}})],1)},g=[],m={filters:{statusFilter:function(t){var e={0:"启用",1:"禁用"};return e[t]},monStatusFilter:function(t){var e={0:"操作系统",1:"中间件",2:"DB",3:"应用"};return e[t]}},components:{},data:function(){var t=this;return{query:{login:"",name:"",status:void 0,page:1,pageSize:5},title:"用户管理新增",expand:!1,dialogType:"",showNext:!1,canelTitle:"取消",stepstatus:"process",showStatus:!0,loading:!1,showVisible:!1,selectedRowKeys:[],id:"",current:0,form:this.$form.createForm(this),rule:{login:{rules:[{required:!0,message:"请输入用户名"}],initialValue:""},name:{rules:[{required:!0,message:"请输入姓名"}],initialValue:""},status:{rules:[{required:!0,message:"请选择状态"}],initialValue:"1"}},columns:[{title:"角色ID",dataIndex:"id",align:"center"},{title:"角色名称",dataIndex:"name",align:"center"},{title:"角色描述",dataIndex:"desc",align:"center"},{title:"角色状态",dataIndex:"status",align:"center",scopedSlots:{customRender:"status"}}],list:[],pagination:{total:0,defaultPageSize:5,showTotal:function(t){return"共 ".concat(t," 条数据")},showSizeChanger:!0,pageSizeOptions:["5","10","15","20"],onChange:function(e,a){t.pagechage(e,a)},onShowSizeChange:function(e,a){t.pageSizeChange(a)}}}},computed:{rowSelection:function(){var t=this;this.selectedRowKeys;return{onChange:function(e,a){t.enterData=a}}}},methods:{showId:function(t){this.form.setFieldsValue(t)},CreateDialog:function(){this.title="用户管理新增",this.showNext=!1,this.showStatus=!0,this.iconType="form",this.showCanel=!0,this.disabled=!1,this.showVisible=!0,this.current=0,this.dialogType="create",this.stepstatus="process",this.canelTitle="取消",this.showCanel=!0,this.selectedRowKeys=[],this.form.resetFields(),this.query={login:"",name:"",status:"",page:1,pageSize:5}},updateDialog:function(t){var e=this;this.title="用户管理修改",this.showStatus=!0,this.iconType="form",this.showCanel=!0,this.disabled=!1,this.showVisible=!0,this.current=0,this.dialogType="update",this.canelTitle="取消",this.stepstatus="process",this.showCanel=!0,this.selectedRowKeys=[],this.id=t.id,this.query={login:"",name:"",status:"",page:1,pageSize:5},this.form.resetFields(),this.showNext=!0,this.$nextTick(function(){e.form.setFieldsValue(t)})},getRoleIdsByUserId:function(){var t=this,e=this;Object(n["p"])({userId:this.id}).then(function(a){"0000"==a.data.code?(t.canelTitle="关闭",t.showCanel=!0,t.showNext=!0,t.current=1,t.selectedRowKeys=a.data.extend):(t.current=1,e.stepstatus="error")}).catch(function(t){this.current=1,e.stepstatus="error"})},submitCreate:function(){0==this.current?"create"==this.dialogType?this.create():"update"==this.dialogType&&this.update():1==this.current?this.addUserIdAndRoleIds():this.current=2},goNext:function(){0==this.current?this.getList():(this.canelTitle="关闭",this.showCanel=!0,this.showNext=!1,this.current=2)},addUserIdAndRoleIds:function(){var t=this,e=this;Object(n["d"])({userId:this.id,roleIds:this.selectedRowKeys.join(",")}).then(function(a){"0000"==a.data.code?(t.canelTitle="关闭",t.showCanel=!0,t.showNext=!1,t.current=2):(t.$message.error(a.data.message),e.stepstatus="error")}).catch(function(t){e.stepstatus="error"})},getList:function(){var t=this;this.loading=!0,Object(n["q"])(this.query).then(function(e){"0000"==e.data.code?(t.showNext=!0,t.loading=!1,t.showCanel=!1,t.current=1,console.log(e),t.list=e.data.extend.list,t.pagination.total=e.data.extend.total,"update"==t.dialogType&&t.getRoleIdsByUserId()):(t.current=1,_this.stepstatus="error",t.loading=!1,t.$message.error(e.data.message))}).catch(function(t){this.current=1,_this.stepstatus="error"})},create:function(){var t=this,e=this;this.form.validateFields(function(a,s){a||Object(n["e"])(s).then(function(a){"0000"==a.data.code?(t.id=a.data.extend,t.$emit("fresh"),t.getList()):(t.$message.error(a.data.message),e.stepstatus="error")}).catch(function(t){e.stepstatus="error"})})},update:function(){var t=this;this.form.validateFields(function(e,a){e||Object(n["y"])(a).then(function(e){"0000"==e.data.code?(t.getList(),t.$message.success(e.data.message),t.$emit("fresh")):t.$message.error(e.data.message)})})},onSelectChange:function(t){console.info(t),this.selectedRowKeys=t},healthType:function(t){return"0"==t?"success":"1"==t?"warning":"2"==t?"error":"default"},toggle:function(){this.expand=!this.expand},onClose:function(){this.showVisible=!1,this.form.resetFields(),this.$message.info("已取消操作！")},showBounced:function(){this.$refs.bounced.showChildrenDrawer()}}},f=m,v=(a("1c32"),Object(u["a"])(f,h,g,!1,null,null,null)),w=v.exports,b={data:function(){var t=this;return{title:"用户新增",expand:!1,form:this.$form.createForm(this),columns:[{title:"用户ID",dataIndex:"id",align:"center"},{title:"登录名",dataIndex:"login",align:"center"},{title:"姓名",dataIndex:"name",align:"center"},{title:"状态",dataIndex:"status",align:"center",scopedSlots:{customRender:"status"}},{title:"操作",dataIndex:"operation",width:"160px",align:"center",scopedSlots:{customRender:"operation"}}],list:[],pagination:{total:0,defaultPageSize:5,showTotal:function(t){return"共 ".concat(t," 条数据")},showSizeChanger:!0,pageSizeOptions:["5","10","15","20"],onChange:function(e,a){t.pagechage(e,a)},onShowSizeChange:function(e,a){t.pageSizeChange(a)}},listQuery:{login:"",name:"",status:"0",page:1,pageSize:5},statusmap:{0:"禁用",1:"启用"},showVisible:!1,record:{}}},components:{edit:p,create:w},computed:{count:function(){return this.expand?11:3}},created:function(){this.getList()},methods:{getList:function(){var t=this;Object(n["r"])(this.listQuery).then(function(e){t.list=e.data.extend.list,t.pagination.total=e.data.extend.total}).catch(function(t){console.info("失败"),console.info(t.message)})},handleReset:function(){this.listQuery.login="",this.listQuery.name="",this.listQuery.status="0"},showlist:function(t){this.$refs.edit.ShowDialog(Object.assign({},t))},createlist:function(){this.$refs.create.CreateDialog()},update:function(t){this.$refs.create.updateDialog(t)},rolechose:function(t){this.$refs.role.initDialog(t)},deletList:function(t){if(0==t.isValid)this.$error({title:"提示",content:"启用状态下不可删除！"});else{var e=this;this.$confirm({title:"确认删除？",content:"确认删除记录，删除后不可恢复",okType:"danger",onOk:function(){Object(n["i"])({id:t.id}).then(function(t){200==t.status?(e.getList(),e.$message.success("删除成功！")):e.$message.error("删除失败！")})}})}},resetpasswd:function(t){var e=this;this.$confirm({title:"重置密码",content:"确认重置密码？",okType:"info",onOk:function(){Object(n["t"])({id:t.id}).then(function(t){200==t.status?(e.getList(),e.$message.success("重置密码成功！")):e.$message.error("重置密码失败！")})}})},fresh:function(){this.getList()},toggle:function(){this.expand=!this.expand},pageSizeChange:function(t){this.listQuery.pageNum=1,this.listQuery.pageSize=t,this.getList()},pagechage:function(t,e){this.listQuery.pageNum=t,this.listQuery.pageSize=e,this.getList()}}},y=b,x=(a("cec7"),Object(u["a"])(y,s,i,!1,null,null,null));e["default"]=x.exports}}]);
//# sourceMappingURL=chunk-a88bd000.029d1198.js.map