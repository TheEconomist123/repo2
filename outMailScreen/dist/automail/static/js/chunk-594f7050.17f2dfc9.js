(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-594f7050"],{"3a5d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"commonContent"},[a("a-form-model",{staticClass:"commomForm",attrs:{form:e.form},on:{submit:e.handleSearch}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"主题种类","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:"1"},on:{change:e.handleChange},model:{value:e.listQuery.payload.setType,callback:function(t){e.$set(e.listQuery.payload,"setType",t)},expression:"listQuery.payload.setType"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("标题")]),a("a-select-option",{attrs:{value:"1"}},[e._v("正文")]),a("a-select-option",{attrs:{value:"2"}},[e._v("落款")])],1)],1)],1),a("a-col",{attrs:{span:8}},[a("a-form-model-item",{attrs:{label:"邮件类型","label-col":{span:5},"wrapper-col":{span:12}}},[a("a-select",{staticStyle:{width:"100%"},attrs:{defaultValue:"1"},on:{change:e.handleChange},model:{value:e.listQuery.payload.mailType,callback:function(t){e.$set(e.listQuery.payload,"mailType",t)},expression:"listQuery.payload.mailType"}},[a("a-select-option",{attrs:{value:"0"}},[e._v("生日祝福")]),a("a-select-option",{attrs:{value:"1"}},[e._v("感谢信")])],1)],1)],1),a("a-col",{style:{textAlign:"right",paddingRight:"20px"},attrs:{span:this.expand?24:8}},[a("a-form-model-item",[a("a-button",{attrs:{type:"primary",icon:"search"},on:{click:e.getList}},[e._v("\n              搜  索\n            ")]),a("a-button",{style:{marginLeft:"8px"},attrs:{icon:"redo"},on:{click:e.handleReset}},[e._v("\n              重  置\n            ")])],1)],1)],1)],1),a("div",{staticClass:"search-result-list"},[a("a-table",{attrs:{columns:e.columns,dataSource:e.list,bordered:"",pagination:e.pagination},scopedSlots:e._u([{key:"status",fn:function(t){return a("span",{},[a("a-badge",{attrs:{status:"1"==t?"success":"error"}}),e._v("\n\t\t\t\t\t"+e._s(e.statusmap[t])+"\n\t\t\t\t")],1)}},{key:"mailType",fn:function(t){return a("span",{},[e._v("\n\t\t\t\t\t"+e._s(e.mailTypeMap[t])+"\n\t\t\t\t")])}},{key:"setType",fn:function(t){return a("span",{},[e._v("\n\t\t\t\t\t"+e._s(e.setStyleMap[t])+"\n\t\t\t\t")])}},{key:"fontColor",fn:function(t){return a("span",{},[a("a-tag",{attrs:{color:t}},[e._v("\n        "+e._s(t)+"\n      ")])],1)}},{key:"fontStyle",fn:function(t){return a("span",{},[e._v("\n\t\t\t\t\t"+e._s(e.fontStyleMap[t])+"\n\t\t\t\t")])}},{key:"operation",fn:function(t,i){return a("span",{},[a("a",{on:{click:function(t){return e.showlist(i)}}},[e._v("查看")]),a("a-divider",{attrs:{type:"vertical"}}),a("a",{attrs:{href:"javascript:;"},on:{click:function(t){return e.update(i)}}},[e._v("修改")])],1)}}])})],1),a("edit",{ref:"edit",on:{fresh:e.fresh}})],1)},s=[],o=a("8daa");function l(e){return Object(o["a"])({url:"/text/getTextStyleByPage",method:"post",data:e})}function n(e){return Object(o["a"])({url:"/text/updateTextStyleInfo",method:"post",data:e})}var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-drawer",{attrs:{placement:"right",closable:!0,visible:e.showVisible,width:"700px"},on:{close:e.onClose}},[a("span",{attrs:{slot:"title"},slot:"title"},[a("a-icon",{attrs:{type:e.iconType}}),e._v("  "+e._s(e.dialogTypeMap[e.dialogType])+"\n\n\t\t")],1),a("a-form",{staticClass:"ant-advanced-search-form",staticStyle:{border:"none"},attrs:{form:e.form}},[a("a-row",{attrs:{gutter:24}},[a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"id","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["id",e.rule.id],expression:"['id',rule.id]"}],attrs:{placeholder:"id",disabled:e.disabled1}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"邮件类型","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["mailType",e.rule.mailType],expression:"['mailType',rule.mailType]"}],staticStyle:{width:"100%"},attrs:{"default-value":"邮件类型",placeholder:"请输入邮件类型",disabled:e.disabled1},on:{change:e.handleChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v("生日祝福")]),a("a-select-option",{attrs:{value:"1"}},[e._v("感谢信")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"主题类型","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["setType",e.rule.setType],expression:"['setType',rule.setType]"}],staticStyle:{width:"100%"},attrs:{"default-value":"标题",placeholder:"请输入主题类型",disabled:e.disabled1},on:{change:e.handleChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v("标题")]),a("a-select-option",{attrs:{value:"1"}},[e._v(" 正文")]),a("a-select-option",{attrs:{value:"2"}},[e._v(" 落款")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"字体种类","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fontFamily",e.rule.fontFamily],expression:"['fontFamily',rule.fontFamily]"}],attrs:{placeholder:"请输入字体种类",disabled:e.disabled}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"字体大小","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input-number",{directives:[{name:"decorator",rawName:"v-decorator",value:["fontSize",e.rule.fontSize],expression:"['fontSize',rule.fontSize]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入字体大小",disabled:e.disabled,autocomplete:"off"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"字体样式","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["fontStyle",e.rule.fontStyle],expression:"['fontStyle',rule.fontStyle]"}],staticStyle:{width:"100%"},attrs:{"default-value":"粗体",disabled:e.disabled},on:{change:e.handleChange}},[a("a-select-option",{attrs:{value:"0"}},[e._v("正常")]),a("a-select-option",{attrs:{value:"1"}},[e._v("粗体")]),a("a-select-option",{attrs:{value:"2"}},[e._v("斜体")])],1)],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"左边距","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["xCoord",e.rule.xCoord],expression:"['xCoord',rule.xCoord]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入左边距",disabled:e.disabled,autocomplete:"off"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"上边距","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["yCoord",e.rule.yCoord],expression:"['yCoord',rule.yCoord]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入上边距",disabled:e.disabled,autocomplete:"off"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"行间距","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineSpace",e.rule.lineSpace],expression:"['lineSpace',rule.lineSpace]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入行间距",disabled:e.disabled,autocomplete:"off"}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{staticStyle:{width:"100%"},attrs:{label:"行   宽","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["lineWidth",e.rule.lineWidth],expression:"['lineWidth',rule.lineWidth]"}],staticStyle:{width:"100%"},attrs:{placeholder:"请输入行宽",disabled:e.disabled}})],1)],1),a("a-col",{attrs:{span:12}},[a("a-form-item",{attrs:{label:"颜色","label-col":{span:8},"wrapper-col":{span:16}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fontColor",e.rule.fontColor],expression:"['fontColor',rule.fontColor]"}],attrs:{type:"color",placeholder:"请选择颜色",disabled:e.disabled}}),a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["fontColor",e.rule.fontColor],expression:"['fontColor',rule.fontColor]"}],attrs:{placeholder:"请选择颜色",disabled:e.disabled}})],1)],1),a("a-col",{attrs:{span:24}},[a("a-form-item",{attrs:{label:"模板","label-col":{span:4},"wrapper-col":{span:20}}},[a("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["template",e.rule.template],expression:"['template',rule.template]"}],attrs:{placeholder:"请输入模板",type:"textarea","auto-size":{minRows:5},disabled:e.disabled}})],1)],1)],1)],1),a("div",{staticClass:"clearfix"},[a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1),a("div",{style:{position:"absolute",left:0,bottom:0,width:"100%",borderTop:"1px solid #e9e9e9",padding:"10px 16px",background:"#fff",textAlign:"right"}},[e.showCanel?a("a-button",{style:{marginRight:"8px"},on:{click:e.onClose}},[e._v(" 取消")]):e._e(),a("a-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(e._s(e.SubmitTypeMap[e.dialogType]))])],1)],1)},d=[],c=(a("96cf"),a("3b8d")),p=a("c1df"),u=a.n(p);function h(e){return new Promise(function(t,a){var i=new FileReader;i.readAsDataURL(e),i.onload=function(){return t(i.result)},i.onerror=function(e){return a(e)}})}var m={data:function(){return{showUploadList:{showRemoveIcon:!1},showUpload:!1,disabled:"",disabled1:"",showVisible:!1,form:this.$form.createForm(this),hackRest:!1,dialogType:"",dialogTypeMap:{show:"邮件详情",create:"邮件新增",update:"邮件修改",updateImg:"修改背景图片"},SubmitTypeMap:{show:"关闭",create:"确认新增",update:"确认修改",updateImg:"关闭"},showCanel:!0,rule:{},previewVisible:!1,previewImage:"",fileList:[]}},methods:{moment:u.a,ShowDialog:function(e){var t=this;this.disabled=!0,this.disabled1=!0,this.showUpload=!1,this.showCanel=!1,this.showVisible=!0,this.iconType="copy",this.dialogType="show",this.timeTask=e,this.$nextTick(function(){t.hackRest=!0,t.form.setFieldsValue(e),t.fileFormatter()})},UpdateImgDialog:function(e){var t=this;this.disabled=!0,this.disabled1=!0,this.showUpload=!0,this.showCanel=!1,this.showVisible=!0,this.iconType="copy",this.dialogType="updateImg",this.timeTask=e,this.$nextTick(function(){t.hackRest=!0,t.form.setFieldsValue(e),t.fileFormatter()})},CreateDialog:function(){this.iconType="form",this.showCanel=!0,this.disabled=!1,this.disabled1=!1,this.showVisible=!0,this.dialogType="create",this.form.resetFields()},UpdateDialog:function(e){var t=this;this.iconType="form",this.showCanel=!0,this.disabled=!1,this.disabled1=!0,this.showUpload=!1,this.showVisible=!0,this.dialogType="update",this.timeTask=e,this.$nextTick(function(){t.hackRest=!0,t.form.setFieldsValue(e)})},onClose:function(){this.showVisible=!1,this.form.resetFields()},onSubmit:function(){"show"!=this.dialogType&&"updateImg"!=this.dialogType||(this.showVisible=!1),"create"==this.dialogType&&this.create(),"update"==this.dialogType&&this.update()},update:function(){var e=this;this.form.validateFields(function(t,a){t||(n(a).then(function(t){"0000"==t.data.code?(e.$message.success(t.data.message),e.$emit("fresh")):e.$message.error(t.data.message)}),e.showVisible=!1)})},handleCancel:function(){this.previewVisible=!1},handlePreview:function(){var e=Object(c["a"])(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t.url||t.preview){e.next=4;break}return e.next=3,h(t.originFileObj);case 3:t.preview=e.sent;case 4:this.previewImage=t.url||t.preview,this.previewVisible=!0;case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),handleChange:function(e){var t=e.fileList;this.fileList=t},downloadFilesCustomRequest:function(e){var t=new FormData;t.append("file",e.file),t.append("id",this.form.getFieldValue("id"))},fileFormatter:function(){var e=this;getImgById({id:this.form.getFieldValue("id")}).then(function(t){var a={uid:"1",name:"背景图片",status:"done"},i=new Blob([t.data]),s=window.URL.createObjectURL(i);a.url=s,e.fileList=[],e.fileList.push(a)})}}},f=m,v=a("2877"),y=Object(v["a"])(f,r,d,!1,null,null,null),b=y.exports,g={data:function(){var e=this;return{title:"邮件内容配置",expand:!1,form:this.$form.createForm(this),columns:[{title:"主题种类",dataIndex:"setType",align:"center",scopedSlots:{customRender:"setType"}},{title:"文字大小",dataIndex:"fontSize",align:"center"},{title:"字体种类",dataIndex:"fontFamily",align:"center"},{title:"左边距(px)",dataIndex:"xCoord",align:"center"},{title:"上边距(px)",dataIndex:"yCoord",align:"center"},{title:"行间距(px)",dataIndex:"lineSpace",align:"center"},{title:"字体颜色",dataIndex:"fontColor",align:"center",scopedSlots:{customRender:"fontColor"}},{title:"字体样式",dataIndex:"fontStyle",align:"center",scopedSlots:{customRender:"fontStyle"}},{title:"行宽(px)",dataIndex:"lineWidth",align:"center"},{title:"邮件类型",dataIndex:"mailType",align:"center",scopedSlots:{customRender:"mailType"}},{title:"操作",dataIndex:"operation",width:"160px",align:"center",scopedSlots:{customRender:"operation"}}],list:[],pagination:{total:0,defaultPageSize:5,showTotal:function(e){return"共 ".concat(e," 条数据")},showSizeChanger:!0,pageSizeOptions:["5","10","15","20"],onChange:function(t,a){e.pagechage(t,a)},onShowSizeChange:function(t,a){e.pageSizeChange(a)}},listQuery:{payload:{id:"",name:"",status:""},page:1,pageSize:5},statusmap:{0:"发送失败",1:"发送成功"},mailTypeMap:{0:"生日祝福",1:"感谢信"},setStyleMap:{0:"标题",1:"正文",2:"落款"},fontStyleMap:{0:"正常",1:"粗体",2:"斜体"},showVisible:!1,record:{}}},components:{edit:b},computed:{count:function(){return this.expand?11:3}},created:function(){this.getList()},methods:{getList:function(){var e=this;l(this.listQuery).then(function(t){e.list=t.data.extend.list,e.pagination.total=t.data.extend.total}).catch(function(e){console.info("失败"),console.info(e.message)})},handleReset:function(){this.listQuery.payload={cityId:"",cityName:"",status:""}},showlist:function(e){this.$refs.edit.ShowDialog(Object.assign({},e))},updateImg:function(e){this.$refs.edit.UpdateImgDialog(Object.assign({},e))},createlist:function(){this.$refs.edit.CreateDialog()},update:function(e){this.$refs.edit.UpdateDialog(e)},fresh:function(){this.getList()},toggle:function(){this.expand=!this.expand},pageSizeChange:function(e){this.listQuery.pageNum=1,this.listQuery.pageSize=e,this.getList()},pagechage:function(e,t){this.listQuery.pageNum=e,this.listQuery.pageSize=t,this.getList()}}},w=g,x=(a("7b55"),Object(v["a"])(w,i,s,!1,null,null,null));t["default"]=x.exports},"5f20":function(e,t,a){},"7b55":function(e,t,a){"use strict";var i=a("5f20"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-594f7050.17f2dfc9.js.map