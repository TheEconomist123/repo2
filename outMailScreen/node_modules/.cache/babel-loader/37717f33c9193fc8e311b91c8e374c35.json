{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\thread-loader\\dist\\cjs.js!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\mail\\oesbecc\\outMailScreen\\src\\request\\index.js","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\request\\index.js","mtime":1640079748739},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1640070694039},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1640070643981},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\@vue\\cli-plugin-eslint\\node_modules\\eslint-loader\\index.js","mtime":1640070680432}],"contextDependencies":[],"result":["import axios from \"axios\";\nimport store from \"../store\"; // create an axios instance\n\nvar BASE_URL = window.g.baseUrl;\nvar timeout = window.g.timeout;\nvar request = axios.create({\n  //baseURL: process.env.VUE_APP_BASE_API, // api 的 base_url\n  baseURL: BASE_URL,\n  timeout: timeout // request timeout\n\n});\nimport { message } from \"ant-design-vue\"; // request interceptor\n\nrequest.interceptors.request.use(function (config) {\n  // Do something before request is sent\n  console.info(\"请求拦截\");\n  config.headers[\"Authorization\"] = store.state.token;\n  return config;\n}, function (error) {\n  //message.error(error.message)\n  return Promise.reject(error);\n}); // response interceptor\n\nrequest.interceptors.response.use(function (response) {\n  //  console.info(response);\n  if (response.data.code == \"401\") {\n    //跳转到登录页面\n    store.dispatch(\"LogOut\").then(function () {\n      location.reload(); //this.$router.push({path:'/login'})\n    });\n  }\n\n  return response;\n}, function (error) {\n  // message.error(error.message)\n  return Promise.reject(error);\n});\nexport default request;",{"version":3,"sources":["D:\\mail\\oesbecc\\outMailScreen\\src\\request\\index.js"],"names":["axios","store","BASE_URL","window","g","baseUrl","timeout","request","create","baseURL","message","interceptors","use","config","console","info","headers","state","token","error","Promise","reject","response","data","code","dispatch","then","location","reload"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,iB,CACA;;AACA,IAAMC,QAAQ,GAAGC,MAAM,CAACC,CAAP,CAASC,OAA1B;AACA,IAAMC,OAAO,GAAGH,MAAM,CAACC,CAAP,CAASE,OAAzB;AAEA,IAAMC,OAAO,GAAGP,KAAK,CAACQ,MAAN,CAAa;AAC3B;AACAC,EAAAA,OAAO,EAAEP,QAFkB;AAG3BI,EAAAA,OAAO,EAAEA,OAHkB,CAGV;;AAHU,CAAb,CAAhB;AAKA,SAASI,OAAT,QAAwB,gBAAxB,C,CACA;;AACAH,OAAO,CAACI,YAAR,CAAqBJ,OAArB,CAA6BK,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AACAC,EAAAA,OAAO,CAACC,IAAR,CAAa,MAAb;AACAF,EAAAA,MAAM,CAACG,OAAP,CAAe,eAAf,IAAkCf,KAAK,CAACgB,KAAN,CAAYC,KAA9C;AACA,SAAOL,MAAP;AACD,CANH,EAOE,UAAAM,KAAK,EAAI;AACP;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAVH,E,CAaA;;AACAZ,OAAO,CAACI,YAAR,CAAqBW,QAArB,CAA8BV,GAA9B,CACE,UAAAU,QAAQ,EAAI;AACV;AAEA,MAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,IAAsB,KAA1B,EAAiC;AAC/B;AACAvB,IAAAA,KAAK,CAACwB,QAAN,CAAe,QAAf,EAAyBC,IAAzB,CAA8B,YAAM;AAClCC,MAAAA,QAAQ,CAACC,MAAT,GADkC,CAElC;AACD,KAHD;AAID;;AACD,SAAON,QAAP;AACD,CAZH,EAaE,UAAAH,KAAK,EAAI;AACP;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACD,CAhBH;AAmBA,eAAeZ,OAAf","sourcesContent":["import axios from \"axios\";\r\nimport store from \"../store\";\r\n// create an axios instance\r\nconst BASE_URL = window.g.baseUrl;\r\nconst timeout = window.g.timeout;\r\n\r\nconst request = axios.create({\r\n  //baseURL: process.env.VUE_APP_BASE_API, // api 的 base_url\r\n  baseURL: BASE_URL,\r\n  timeout: timeout // request timeout\r\n});\r\nimport { message } from \"ant-design-vue\";\r\n// request interceptor\r\nrequest.interceptors.request.use(\r\n  config => {\r\n    // Do something before request is sent\r\n    console.info(\"请求拦截\");\r\n    config.headers[\"Authorization\"] = store.state.token;\r\n    return config;\r\n  },\r\n  error => {\r\n    //message.error(error.message)\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n// response interceptor\r\nrequest.interceptors.response.use(\r\n  response => {\r\n    //  console.info(response);\r\n\r\n    if (response.data.code == \"401\") {\r\n      //跳转到登录页面\r\n      store.dispatch(\"LogOut\").then(() => {\r\n        location.reload();\r\n        //this.$router.push({path:'/login'})\r\n      });\r\n    }\r\n    return response;\r\n  },\r\n  error => {\r\n    // message.error(error.message)\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nexport default request;\r\n"]}]}