{"remainingRequest":"D:\\oesbecc\\outScreen\\node_modules\\babel-loader\\lib\\index.js!D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\oesbecc\\outScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\oesbecc\\outScreen\\src\\views\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\oesbecc\\outScreen\\src\\views\\role\\index.vue","mtime":1637304821606},{"path":"D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626312140594},{"path":"D:\\oesbecc\\outScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1626312110547},{"path":"D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626312140594},{"path":"D:\\oesbecc\\outScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1626312141896}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getRolesByPage, delRole } from '@/api/system.js';\nimport edit from \"./edit\";\nimport mymenu from \"./menu\";\nimport create from \"./create\";\nexport default {\n  data: function data() {\n    var _this2 = this;\n\n    return {\n      title: '用户新增',\n      expand: false,\n      form: this.$form.createForm(this),\n      columns: [{\n        title: '角色ID',\n        dataIndex: 'id',\n        align: 'center'\n      }, {\n        title: '角色名称',\n        dataIndex: 'name',\n        align: 'center'\n      }, {\n        title: '角色描述',\n        dataIndex: 'desc',\n        align: 'center'\n      }, {\n        title: '角色状态',\n        dataIndex: 'status',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'status'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        width: '160px',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'operation'\n        }\n      }],\n      list: [],\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        showTotal: function showTotal(total) {\n          return \"\\u5171 \".concat(total, \" \\u6761\\u6570\\u636E\");\n        },\n        showSizeChanger: true,\n        pageSizeOptions: ['5', '10', '15', '20'],\n        onChange: function onChange(page, pageSize) {\n          _this2.pagechage(page, pageSize);\n        }\n      },\n      query: {\n        login: '',\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      },\n      statusmap: {\n        '0': '停用',\n        '1': '启用'\n      },\n      showVisible: false,\n      record: {}\n    };\n  },\n  components: {\n    edit: edit,\n    mymenu: mymenu,\n    create: create\n  },\n  computed: {\n    count: function count() {\n      return this.expand ? 11 : 3;\n    }\n  },\n  created: function created() {\n    this.getList();\n  },\n  methods: {\n    getList: function getList() {\n      var _this3 = this;\n\n      getRolesByPage().then(function (response) {\n        _this3.list = response.data.extend.list;\n        _this3.pagination.total = response.data.extend.total;\n      }).catch(function (error) {\n        console.info(\"失败\");\n        console.info(error.message);\n      });\n    },\n    handleReset: function handleReset() {\n      this.form.resetFields();\n    },\n    //查看更多\n    showlist: function showlist(row) {\n      this.$refs.edit.ShowDialog(Object.assign({}, row));\n    },\n    //新增\n    createlist: function createlist() {\n      this.$refs.create.CreateDialog();\n    },\n    //修改\n    update: function update(row) {\n      this.$refs.create.updateDialog(row);\n    },\n    //删除\n    deletList: function deletList(row) {\n      if (row.isValid == 0) {\n        this.$error({\n          title: '提示',\n          content: '启用状态下不可删除！'\n        });\n      } else {\n        var _this = this;\n\n        this.$confirm({\n          title: '确认删除？',\n          content: '确认删除记录，删除后不可恢复',\n          okType: 'danger',\n          onOk: function onOk() {\n            delRole({\n              id: row.id\n            }).then(function (res) {\n              if (res.status == 200) {\n                _this.getList();\n\n                _this.$message.success('删除成功！');\n              } else {\n                _this.$message.error('删除失败！');\n              }\n            });\n          }\n        });\n      }\n    },\n    menuchose: function menuchose(row) {\n      this.$refs.menu.initDialog(row);\n    },\n    //刷新数据\n    fresh: function fresh() {\n      this.getList();\n    },\n    toggle: function toggle() {\n      this.expand = !this.expand;\n    },\n    pagechage: function pagechage(page, pageSize) {\n      this.page = page;\n      this.pageSize = pageSize;\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n<!--角色管理-->\r\n  <div class=\"commonContent\">\r\n    <a-form class=\"commomForm\"\r\n            :form=\"form\"\r\n            @submit=\"handleSearch\">\r\n      <a-row :gutter=\"24\">\r\n        <a-col :span=\"8\">\r\n          <a-form-item label=\"角色名\" :label-col=\"{ span: 5 }\"\r\n\t\t\t:wrapper-col=\"{ span: 12 }\">\r\n            <a-input v-model=\"query.login\" placeholder=\"角色名\" />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <a-form-item label=\"状态\" :label-col=\"{ span: 5 }\"\r\n\t\t  :wrapper-col=\"{ span: 12 }\">\r\n        <a-select defaultValue=\"0\" v-model=\"query.status\" style=\"width: 100%\" @change=\"handleChange\">\r\n          <a-select-option value=\"0\">禁用</a-select-option>\r\n          <a-select-option value=\"1\">启用</a-select-option>\r\n        </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col span=\"8\" :style=\"{ textAlign: 'right',paddingRight:'20px' }\">\r\n          <a-form-item>\r\n          <a-button type=\"primary\" @click=\"getList\" icon=\"search\">\r\n            搜&nbsp;&nbsp;索\r\n          </a-button>\r\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\" icon=\"redo\">\r\n            重&nbsp;&nbsp;置\r\n          </a-button>\r\n\r\n            </a-form-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form>\r\n    <div class=\"search-result-list\">\r\n      <div class=\"table-operations\">\r\n  <a-button @click=\"createlist\" type=\"dashed\" border style='margin:0;'  :style=\"{width:'100%'}\" >\r\n    <a-icon type=\"plus\"/>\r\n    新增</a-button>\r\n</div>\r\n      <a-table :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n        <span slot=\"status\" slot-scope=\"status\">\r\n             <a-badge :status=\"status=='1'?'success':'error'\" />\r\n            {{statusmap[status]}}\r\n        </span>\r\n\r\n        <span slot=\"operation\" slot-scope=\"text, record\">\r\n        <a  @click=\"showlist(record)\">查看</a>\r\n        <a-divider type=\"vertical\" />\r\n        <a-dropdown>\r\n          <a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n          更多 <a-icon type=\"down\" />\r\n          </a>\r\n          <a-menu slot=\"overlay\">\r\n          <a-menu-item>\r\n            <a href=\"javascript:;\" @click=\"update(record)\">修改</a>\r\n          </a-menu-item>\r\n          <a-menu-item>\r\n            <a href=\"javascript:;\" @click=\"deletList(record)\">删除</a>\r\n          </a-menu-item>\r\n          </a-menu>\r\n        </a-dropdown>\r\n          </span>\r\n\r\n      </a-table>\r\n    </div>\r\n\r\n\r\n\r\n            <edit ref='edit' @fresh=\"fresh\"/>\r\n            <mymenu ref='menu' @fresh=\"fresh\"/>\r\n\r\n\t\t\t<create ref='create' @fresh=\"fresh\"/>\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport {getRolesByPage,delRole} from '@/api/system.js';\r\nimport edit from './edit';\r\nimport mymenu from './menu';\r\n\r\nimport create from './create';\r\n\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        title:'用户新增',\r\n        expand: false,\r\n        form: this.$form.createForm(this),\r\n        columns: [\r\n          { title: '角色ID', dataIndex: 'id',align:'center' },\r\n          { title: '角色名称', dataIndex: 'name' ,align:'center'},\r\n          { title: '角色描述', dataIndex: 'desc',align:'center' },\r\n          { title: '角色状态', dataIndex: 'status',align:'center',scopedSlots: { customRender: 'status' } },\r\n          { title: '操作', dataIndex: 'operation', width:'160px',align:'center',scopedSlots: { customRender: 'operation' } }\r\n        ],\r\n        list: [\r\n        ],\r\n        pagination: {\r\n             total :0,\r\n             defaultPageSize:5,\r\n             showTotal: total => `共 ${total} 条数据`,\r\n             showSizeChanger:true,\r\n             pageSizeOptions: ['5', '10', '15', '20'],\r\n             onChange:(page, pageSize)=>{\r\n               this.pagechage(page, pageSize);\r\n             }\r\n        },\r\n        query: {\r\n          login: '',\r\n          name: '',\r\n          status: '',\r\n          page:1,\r\n          pageSize:5\r\n        },\r\n        statusmap:{\r\n          '0':'停用',\r\n          '1':'启用'\r\n        },\r\n        showVisible: false,\r\n        record:{}\r\n      }\r\n    },\r\n    components:{\r\n      edit,\r\n      mymenu,\r\n\t  create\r\n    },\r\n    computed: {\r\n      count() {\r\n        return this.expand ? 11 : 3\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.getList()\r\n\t},\r\n    methods: {\r\n      getList() {\r\n\r\n        getRolesByPage().then(response=>{\r\n          this.list = response.data.extend.list\r\n          this.pagination.total=response.data.extend.total;\r\n        }).catch(error=>{\r\n          console.info(\"失败\");\r\n          console.info(error.message);\r\n        });\r\n      },\r\n\r\n      handleReset() {\r\n        this.form.resetFields()\r\n      },\r\n\r\n      //查看更多\r\n  \t\t  showlist(row) {\r\n  \t\t\tthis.$refs.edit.ShowDialog(Object.assign({},row));\r\n  \t\t  },\r\n\r\n  \t\t  //新增\r\n  \t\t  createlist() {\r\n  \t\t\tthis.$refs.create.CreateDialog();\r\n  \t\t  },\r\n        //修改\r\n       update(row){\r\n       this.$refs.create.updateDialog(row);\r\n       },\r\n       //删除\r\n       deletList(row){\r\n         if(row.isValid==0){\r\n         this.$error({\r\n           title:'提示',\r\n           content:'启用状态下不可删除！'\r\n         })\r\n         }else{\r\n         var _this=this\r\n         this.$confirm({\r\n           title:'确认删除？',\r\n           content:'确认删除记录，删除后不可恢复',\r\n           okType:'danger',\r\n           onOk(){\r\n           delRole({id:row.id}).then(res=>{\r\n             if(res.status==200){\r\n               _this.getList()\r\n               _this.$message.success('删除成功！')\r\n             }else{\r\n               _this.$message.error('删除失败！')\r\n             }\r\n           })\r\n           },\r\n         })\r\n         }\r\n\r\n       },\r\n       menuchose(row){\r\n          this.$refs.menu.initDialog(row);\r\n       },\r\n\r\n\t   //刷新数据\r\n\t   fresh(){\r\n\t   \t\t\tthis.getList()\r\n\t   },\r\n\r\n      toggle() {\r\n        this.expand = !this.expand\r\n      },\r\n      pagechage(page, pageSize){\r\n        this.page= page;\r\n        this.pageSize=pageSize;\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style>\r\n\r\n  .commomForm {\r\n    padding: 0px 12px;\r\n    --border: 1px solid #d9d9d9;\r\n    --border-radius: 6px;\r\n  }\r\n\r\n  .commomForm .ant-form-item {\r\n    display: flex;\r\n  }\r\n\r\n  .commomForm .ant-form-item-control-wrapper {\r\n    flex: 1;\r\n  }\r\n\r\n  .commonContent .ant-form {\r\n    max-width: none;\r\n    border-radius: 4px;\r\n  }\r\n  .commonContent .search-result-list {\r\n    --margin-top: 5px;\r\n    text-align: center;\r\n    padding: 4px 12px;\r\n  }\r\n\r\n.table-operations {\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n.modeButton{\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #e9e9e9;\r\n  padding: 10px 26px;\r\n  background: #fff;\r\n  text-align: right;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/role"}]}