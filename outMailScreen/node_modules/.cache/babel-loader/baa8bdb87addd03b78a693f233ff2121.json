{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\staffInfo\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\staffInfo\\index.vue","mtime":1640763973559},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1640070643981},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { getExcelModel, saveExcelData, getStaffInfoByPage, delStaffInfo } from '@/api/staffInfo.js';\nimport edit from \"./edit\";\nexport default {\n  data: function data() {\n    var _this2 = this;\n\n    return {\n      title: '员工新增',\n      expand: false,\n      form: this.$form.createForm(this),\n      columns: [{\n        title: '员工编号',\n        dataIndex: 'id',\n        align: 'center'\n      }, {\n        title: '姓名',\n        dataIndex: 'name',\n        align: 'center'\n      }, {\n        title: '出生日期',\n        dataIndex: 'birth',\n        align: 'center'\n      }, {\n        title: '入职日期',\n        dataIndex: 'entry',\n        align: 'center'\n      }, {\n        title: '邮箱账号',\n        dataIndex: 'eMail',\n        align: 'center'\n      }, {\n        title: '备注',\n        dataIndex: 'desx',\n        align: 'center'\n      }, {\n        title: '状态',\n        dataIndex: 'status',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'status'\n        }\n      }, {\n        title: '操作',\n        dataIndex: 'operation',\n        width: '160px',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'operation'\n        }\n      }],\n      list: [],\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        showTotal: function showTotal(total) {\n          return \"\\u5171 \".concat(total, \" \\u6761\\u6570\\u636E\");\n        },\n        showSizeChanger: true,\n        pageSizeOptions: ['5', '10', '15', '20'],\n        onChange: function onChange(page, pageSize) {\n          _this2.pagechage(page, pageSize);\n        },\n        onShowSizeChange: function onShowSizeChange(current, pageSize) {\n          _this2.pageSizeChange(pageSize);\n        }\n      },\n      listQuery: {\n        payload: {\n          id: '',\n          name: '',\n          status: ''\n        },\n        page: 1,\n        pageSize: 5\n      },\n      statusmap: {\n        '0': '离职',\n        '1': '在职'\n      },\n      showVisible: false,\n      record: {}\n    };\n  },\n  components: {\n    edit: edit\n  },\n  computed: {\n    count: function count() {\n      return this.expand ? 11 : 3;\n    }\n  },\n  created: function created() {\n    this.getList();\n  },\n  methods: {\n    importStaff: function importStaff() {\n      this.$refs.inputFile.dispatchEvent(new MouseEvent('click'));\n    },\n    //下载模板\n    downloadModel: function downloadModel() {\n      //下载excel\n      getExcelModel().then(function (res) {\n        var filename = \"员工信息表.xlsx\";\n        var blob = new Blob([res.data]);\n        var downloadElement = document.createElement(\"a\");\n        var href = window.URL.createObjectURL(blob);\n        downloadElement.href = href;\n        downloadElement.download = decodeURIComponent(filename);\n        document.body.appendChild(downloadElement);\n        downloadElement.click();\n        document.body.removeChild(downloadElement);\n        window.URL.revokeObjectURL(href);\n      });\n    },\n    fileChange: function fileChange(event) {\n      var _this3 = this;\n\n      var formData = new FormData();\n      formData.append(\"file\", event.target.files[0]); //将file属性添加到formData里\n\n      saveExcelData(formData).then(function (res) {\n        event.target.value = '';\n\n        if (res.data.code == '0000') {\n          _this3.$message.success(res.data.message);\n\n          _this3.getList();\n        } else {\n          _this3.$message.error(res.data.message);\n        }\n      });\n    },\n    getList: function getList() {\n      var _this4 = this;\n\n      getStaffInfoByPage(this.listQuery).then(function (response) {\n        _this4.list = response.data.extend.list;\n        _this4.pagination.total = response.data.extend.total;\n      }).catch(function (error) {\n        console.info(\"失败\");\n        console.info(error.message);\n      });\n    },\n    handleReset: function handleReset() {\n      this.listQuery.payload = {\n        id: '',\n        name: '',\n        status: '' //this.form.resetFields()\n\n      };\n    },\n    //查看更多\n    showlist: function showlist(row) {\n      this.$refs.edit.ShowDialog(Object.assign({}, row));\n    },\n    //新增\n    createlist: function createlist() {\n      this.$refs.edit.CreateDialog();\n    },\n    //修改\n    update: function update(row) {\n      this.$refs.edit.UpdateDialog(row);\n    },\n    //删除\n    deletList: function deletList(row) {\n      var _this = this;\n\n      this.$confirm({\n        title: '确认删除？',\n        content: '确认删除记录，删除后不可恢复',\n        okType: 'danger',\n        onOk: function onOk() {\n          delStaffInfo({\n            id: row.id\n          }).then(function (res) {\n            if (res.status == 200) {\n              _this.getList();\n\n              _this.$message.success('删除成功！');\n            } else {\n              _this.$message.error('删除失败！');\n            }\n          });\n        }\n      });\n    },\n    //刷新数据\n    fresh: function fresh() {\n      this.getList();\n    },\n    toggle: function toggle() {\n      this.expand = !this.expand;\n    },\n    pageSizeChange: function pageSizeChange(pageSize) {\n      this.listQuery.pageNum = 1;\n      this.listQuery.pageSize = pageSize;\n      this.getList();\n    },\n    pagechage: function pagechage(pageNum, pageSize) {\n      this.listQuery.pageNum = pageNum;\n      this.listQuery.pageSize = pageSize;\n      this.getList();\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"commonContent\">\r\n    <a-form-model class=\"commomForm\" :form=\"form\" @submit=\"handleSearch\">\r\n      <a-row :gutter=\"24\">\r\n        <a-col :span=\"8\">\r\n          <a-form-model-item label=\"员工编号\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n            <a-input v-model=\"listQuery.payload.id\" placeholder=\"员工编号\"/>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <a-form-model-item label=\"员工名称\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n            <a-input v-model=\"listQuery.payload.name\" placeholder=\"员工名称\"/>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"8\" :style=\"{ display: this.expand ? 'block' : 'none'} \">\r\n          <a-form-model-item label=\"在职状态\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n            <a-select defaultValue=\"1\" v-model=\"listQuery.payload.status\" style=\"width: 100%\"\r\n                      @change=\"handleChange\">\r\n              <a-select-option value=\"0\">离职</a-select-option>\r\n              <a-select-option value=\"1\">在职</a-select-option>\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"this.expand ? 24 : 8\" :style=\"{ textAlign: 'right',paddingRight:'20px' }\">\r\n          <a-form-model-item>\r\n            <a-button type=\"primary\" @click=\"getList\" icon=\"search\">\r\n              搜&nbsp;&nbsp;索\r\n            </a-button>\r\n            <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\" icon=\"redo\">\r\n              重&nbsp;&nbsp;置\r\n            </a-button>\r\n            <a :style=\"{ marginLeft: '8px', fontSize: '12px' }\" @click=\"toggle\">\r\n              <a-label label=\"dsdfd\">{{ expand ? '收起' : '展开' }}</a-label>\r\n              <a-icon :type=\"expand ? 'up' : 'down'\"/>\r\n            </a>\r\n          </a-form-model-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form-model>\r\n    <div class=\"search-result-list\">\r\n      <div class=\"table-operations1\">\r\n        <a-button type=\"primary\" style='' @click=\"createlist()\">+ 新&nbsp;&nbsp;&nbsp;&nbsp;增</a-button>\r\n        <a-button type=\"primary\" style='' @click=\"importStaff()\"> 批量导入</a-button>\r\n        <a-button type=\"primary\" style='' @click=\"downloadModel()\"> 模板下载</a-button>\r\n\r\n        <input ref=\"inputFile\" type=\"file\" accept=\".xls,.xlsx\" hidden @change=\"fileChange\"/>\r\n      </div>\r\n      <a-table :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n\t\t\t\t<span slot=\"status\" slot-scope=\"status\">\r\n\t\t\t\t\t<a-badge :status=\"status=='1'?'success':'error'\"/>\r\n\t\t\t\t\t{{ statusmap[status] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"systemType\" slot-scope=\"systemType\">\r\n\t\t\t\t\t{{ systemTypeMap[systemType] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"channel\" slot-scope=\"channel\">\r\n\t\t\t\t\t{{ channelMap[channel] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"operation\" slot-scope=\"text, record\">\r\n\t\t\t\t\t<a @click=\"showlist(record)\">查看</a>\r\n\t\t\t\t\t<a-divider type=\"vertical\"/>\r\n\t\t\t\t\t<a-dropdown>\r\n\t\t\t\t\t\t<a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n\t\t\t\t\t\t\t更多\r\n\t\t\t\t\t\t\t<a-icon type=\"down\"/>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a-menu slot=\"overlay\">\r\n\t\t\t\t\t\t\t<a-menu-item>\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:;\" @click=\"update(record)\">修改</a>\r\n\t\t\t\t\t\t\t</a-menu-item>\r\n\t\t\t\t\t\t\t<a-menu-item>\r\n\t\t\t\t\t\t\t\t<a href=\"javascript:;\" @click=\"deletList(record)\">删除</a>\r\n\t\t\t\t\t\t\t</a-menu-item>\r\n\t\t\t\t\t\t</a-menu>\r\n\t\t\t\t\t</a-dropdown>\r\n\t\t\t\t</span>\r\n      </a-table>\r\n    </div>\r\n    <edit ref='edit' @fresh=\"fresh\"/>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport {\r\n  getExcelModel,\r\n  saveExcelData,\r\n  getStaffInfoByPage,\r\n  delStaffInfo\r\n} from '@/api/staffInfo.js';\r\n\r\nimport edit from './edit';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: '员工新增',\r\n      expand: false,\r\n      form: this.$form.createForm(this),\r\n      columns: [{\r\n        title: '员工编号',\r\n        dataIndex: 'id',\r\n        align: 'center'\r\n      },\r\n        {\r\n          title: '姓名',\r\n          dataIndex: 'name',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '出生日期',\r\n          dataIndex: 'birth',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '入职日期',\r\n          dataIndex: 'entry',\r\n          align: 'center'\r\n        },\r\n\r\n        {\r\n          title: '邮箱账号',\r\n          dataIndex: 'eMail',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '备注',\r\n          dataIndex: 'desx',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '状态',\r\n          dataIndex: 'status',\r\n          align: 'center',\r\n          scopedSlots: {\r\n            customRender: 'status'\r\n          }\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'operation',\r\n          width: '160px',\r\n          align: 'center',\r\n          scopedSlots: {\r\n            customRender: 'operation'\r\n          }\r\n        }\r\n      ],\r\n      list: [],\r\n      pagination: {\r\n        total: 0,\r\n        defaultPageSize: 5,\r\n        showTotal: total => `共 ${total} 条数据`,\r\n        showSizeChanger: true,\r\n        pageSizeOptions: ['5', '10', '15', '20'],\r\n        onChange: (page, pageSize) => {\r\n          this.pagechage(page, pageSize);\r\n        },\r\n        onShowSizeChange: (current, pageSize) => {\r\n          this.pageSizeChange(pageSize);\r\n        }\r\n      },\r\n      listQuery: {\r\n        payload: {\r\n          id: '',\r\n          name: '',\r\n          status: '',\r\n        },\r\n        page: 1,\r\n        pageSize: 5\r\n      },\r\n      statusmap: {\r\n        '0': '离职',\r\n        '1': '在职'\r\n      },\r\n      showVisible: false,\r\n      record: {}\r\n    }\r\n  },\r\n  components: {\r\n    edit\r\n  },\r\n  computed: {\r\n    count() {\r\n      return this.expand ? 11 : 3\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n\r\n    importStaff() {\r\n\r\n      this.$refs.inputFile.dispatchEvent(new MouseEvent('click'))\r\n\r\n    },\r\n\r\n    //下载模板\r\n    downloadModel(){\r\n\r\n      //下载excel\r\n      getExcelModel().then(res=>{\r\n        const filename = \"员工信息表.xlsx\";\r\n        const blob = new Blob([res.data]);\r\n        var downloadElement = document.createElement(\"a\");\r\n        var href = window.URL.createObjectURL(blob);\r\n        downloadElement.href = href;\r\n        downloadElement.download = decodeURIComponent(filename);\r\n        document.body.appendChild(downloadElement);\r\n        downloadElement.click();\r\n        document.body.removeChild(downloadElement);\r\n        window.URL.revokeObjectURL(href);\r\n      })\r\n\r\n\r\n    },\r\n\r\n    fileChange(event) {\r\n\r\n      const formData = new FormData()\r\n      formData.append(\"file\", event.target.files[0]); //将file属性添加到formData里\r\n      saveExcelData(formData).then(res => {\r\n        event.target.value = '';\r\n        if (res.data.code == '0000') {\r\n          this.$message.success(res.data.message)\r\n          this.getList();\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n    },\r\n\r\n\r\n    getList() {\r\n      getStaffInfoByPage(this.listQuery).then(response => {\r\n        this.list = response.data.extend.list;\r\n        this.pagination.total = response.data.extend.total;\r\n      }).catch(error => {\r\n        console.info(\"失败\");\r\n        console.info(error.message);\r\n      });\r\n    },\r\n\r\n    handleReset() {\r\n      this.listQuery.payload = {\r\n        id: '',\r\n        name: '',\r\n        status: '',\r\n      }\r\n      //this.form.resetFields()\r\n    },\r\n\r\n    //查看更多\r\n    showlist(row) {\r\n      this.$refs.edit.ShowDialog(Object.assign({}, row));\r\n    },\r\n\r\n    //新增\r\n    createlist() {\r\n      this.$refs.edit.CreateDialog();\r\n    },\r\n\r\n    //修改\r\n    update(row) {\r\n      this.$refs.edit.UpdateDialog(row);\r\n    },\r\n\r\n    //删除\r\n    deletList(row) {\r\n\r\n      var _this = this\r\n      this.$confirm({\r\n        title: '确认删除？',\r\n        content: '确认删除记录，删除后不可恢复',\r\n        okType: 'danger',\r\n        onOk() {\r\n          delStaffInfo({\r\n            id: row.id\r\n          }).then(res => {\r\n            if (res.status == 200) {\r\n              _this.getList()\r\n              _this.$message.success('删除成功！')\r\n            } else {\r\n              _this.$message.error('删除失败！')\r\n            }\r\n          })\r\n        },\r\n      })\r\n    },\r\n    //刷新数据\r\n    fresh() {\r\n      this.getList()\r\n    },\r\n    toggle() {\r\n      this.expand = !this.expand\r\n    },\r\n    pageSizeChange(pageSize) {\r\n      this.listQuery.pageNum = 1;\r\n      this.listQuery.pageSize = pageSize;\r\n      this.getList();\r\n    },\r\n    pagechage(pageNum, pageSize) {\r\n      this.listQuery.pageNum = pageNum;\r\n      this.listQuery.pageSize = pageSize;\r\n      this.getList();\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.commomForm {\r\n  padding: 0px 12px;\r\n  --border: 1px solid #d9d9d9;\r\n  --border-radius: 6px;\r\n}\r\n\r\n.commomForm .ant-form-item {\r\n  display: flex;\r\n}\r\n\r\n.commomForm .ant-form-item-control-wrapper {\r\n  flex: 1;\r\n}\r\n\r\n.commonContent .ant-form {\r\n  max-width: none;\r\n  border-radius: 4px;\r\n}\r\n\r\n.commonContent .search-result-list {\r\n  --margin-top: 5px;\r\n  text-align: center;\r\n  padding: 4px 12px;\r\n}\r\n\r\n.table-operations1 {\r\n  text-align: left;\r\n  margin-left: 20px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations1 > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n.modeButton {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #e9e9e9;\r\n  padding: 10px 26px;\r\n  background: #fff;\r\n  text-align: right;\r\n  z-index: 999;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/views/staffInfo"}]}