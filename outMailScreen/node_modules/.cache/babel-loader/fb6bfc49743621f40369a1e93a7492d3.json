{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\thread-loader\\dist\\cjs.js!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\user\\create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\user\\create.vue","mtime":1637304821636},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1640070694039},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1640070643981},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { adduser, getUsersByPage, getRolesByPage, addUserIdAndRoleIds as _addUserIdAndRoleIds, getRoleIdsByUserId as _getRoleIdsByUserId, updateUser } from '@/api/system.js'; // import bounced from './bounced';\n\nexport default {\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        '0': '启用',\n        '1': '禁用'\n      };\n      return statusMap[status];\n    },\n    monStatusFilter: function monStatusFilter(status) {\n      var statusMap = {\n        '0': '操作系统',\n        '1': '中间件',\n        '2': 'DB',\n        '3': '应用'\n      };\n      return statusMap[status];\n    }\n  },\n  components: {// bounced\n  },\n  data: function data() {\n    var _this2 = this;\n\n    return {\n      query: {\n        login: '',\n        name: '',\n        status: undefined,\n        page: 1,\n        pageSize: 5\n      },\n      title: '用户管理新增',\n      expand: false,\n      dialogType: '',\n      showNext: false,\n      canelTitle: '取消',\n      stepstatus: 'process',\n      showStatus: true,\n      loading: false,\n      showVisible: false,\n      selectedRowKeys: [],\n      id: \"\",\n      current: 0,\n      form: this.$form.createForm(this),\n      rule: {\n        login: {\n          rules: [{\n            required: true,\n            message: '请输入用户名'\n          }],\n          initialValue: ''\n        },\n        name: {\n          rules: [{\n            required: true,\n            message: '请输入姓名'\n          }],\n          initialValue: ''\n        },\n        status: {\n          rules: [{\n            required: true,\n            message: '请选择状态'\n          }],\n          initialValue: '1'\n        }\n      },\n      columns: [{\n        title: '角色ID',\n        dataIndex: 'id',\n        align: 'center'\n      }, {\n        title: '角色名称',\n        dataIndex: 'name',\n        align: 'center'\n      }, {\n        title: '角色描述',\n        dataIndex: 'desc',\n        align: 'center'\n      }, {\n        title: '角色状态',\n        dataIndex: 'status',\n        align: 'center',\n        scopedSlots: {\n          customRender: 'status'\n        }\n      }],\n      list: [],\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        showTotal: function showTotal(total) {\n          return \"\\u5171 \".concat(total, \" \\u6761\\u6570\\u636E\");\n        },\n        showSizeChanger: true,\n        pageSizeOptions: ['5', '10', '15', '20'],\n        onChange: function onChange(page, pageSize) {\n          _this2.pagechage(page, pageSize);\n        },\n        onShowSizeChange: function onShowSizeChange(current, pageSize) {\n          _this2.pageSizeChange(pageSize);\n        }\n      }\n    };\n  },\n  computed: {\n    rowSelection: function rowSelection() {\n      var _this3 = this;\n\n      var selectedRowKeys = this.selectedRowKeys;\n      return {\n        onChange: function onChange(selectedRowKeys, selectedRows) {\n          // console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\n          _this3.enterData = selectedRows; //console.log(this.enterData)\n        }\n      };\n    }\n  },\n  methods: {\n    //显示绑定关联ID\n    showId: function showId(query) {\n      this.form.setFieldsValue(query); //console.log(query)\n    },\n    //新增\n    CreateDialog: function CreateDialog() {\n      this.title = '用户管理新增';\n      this.showNext = false;\n      this.showStatus = true;\n      this.iconType = \"form\";\n      this.showCanel = true;\n      this.disabled = false;\n      this.showVisible = true;\n      this.current = 0;\n      this.dialogType = 'create';\n      this.stepstatus = \"process\";\n      this.canelTitle = \"取消\";\n      this.showCanel = true;\n      this.selectedRowKeys = [];\n      this.form.resetFields(); //清除缓存数据\n\n      this.query = {\n        login: '',\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      };\n    },\n    // 修改\n    updateDialog: function updateDialog(query) {\n      var _this4 = this;\n\n      this.title = '用户管理修改';\n      this.showStatus = true;\n      this.iconType = \"form\";\n      this.showCanel = true;\n      this.disabled = false;\n      this.showVisible = true;\n      this.current = 0;\n      this.dialogType = 'update';\n      this.canelTitle = \"取消\";\n      this.stepstatus = \"process\";\n      this.showCanel = true;\n      this.selectedRowKeys = [];\n      this.id = query.id;\n      this.query = {\n        login: '',\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      };\n      this.form.resetFields(); //清除缓存数据 \n\n      this.showNext = true;\n      this.$nextTick(function () {\n        _this4.form.setFieldsValue(query);\n      });\n    },\n    getRoleIdsByUserId: function getRoleIdsByUserId() {\n      var _this5 = this;\n\n      var _this = this;\n\n      _getRoleIdsByUserId({\n        userId: this.id\n      }).then(function (res) {\n        if (res.data.code == '0000') {\n          _this5.canelTitle = \"关闭\";\n          _this5.showCanel = true;\n          _this5.showNext = true;\n          _this5.current = 1;\n          _this5.selectedRowKeys = res.data.extend;\n        } else {\n          _this5.current = 1;\n          _this.stepstatus = 'error';\n        }\n      }).catch(function (error) {\n        this.current = 1;\n        _this.stepstatus = 'error';\n      });\n    },\n    submitCreate: function submitCreate() {\n      if (this.current == 0) {\n        if (this.dialogType == \"create\") {\n          this.create();\n        } else if (this.dialogType == \"update\") {\n          this.update();\n        }\n      } else if (this.current == 1) {\n        //添加关联表信息\n        this.addUserIdAndRoleIds();\n      } else {\n        this.current = 2;\n      }\n    },\n    // 直接进入第三步\n    goNext: function goNext() {\n      if (this.current == 0) {\n        this.getList();\n      } else {\n        this.canelTitle = \"关闭\";\n        this.showCanel = true;\n        this.showNext = false;\n        this.current = 2;\n      }\n    },\n    addUserIdAndRoleIds: function addUserIdAndRoleIds() {\n      var _this6 = this;\n\n      var _this = this;\n\n      _addUserIdAndRoleIds({\n        userId: this.id,\n        roleIds: this.selectedRowKeys.join(\",\")\n      }).then(function (res) {\n        if (res.data.code == '0000') {\n          _this6.canelTitle = \"关闭\";\n          _this6.showCanel = true;\n          _this6.showNext = false;\n          _this6.current = 2;\n        } else {\n          _this6.$message.error(res.data.message);\n\n          _this.stepstatus = 'error';\n        }\n      }).catch(function (error) {\n        _this.stepstatus = 'error';\n      });\n    },\n    getList: function getList() {\n      var _this7 = this;\n\n      this.loading = true;\n      getRolesByPage(this.query).then(function (res) {\n        if (res.data.code == '0000') {\n          _this7.showNext = true;\n          _this7.loading = false;\n          _this7.showCanel = false;\n          _this7.current = 1;\n          console.log(res);\n          _this7.list = res.data.extend.list;\n          _this7.pagination.total = res.data.extend.total;\n\n          if (_this7.dialogType == \"update\") {\n            _this7.getRoleIdsByUserId();\n          }\n        } else {\n          _this7.current = 1;\n          _this.stepstatus = 'error';\n          _this7.loading = false;\n\n          _this7.$message.error(res.data.message);\n        }\n      }).catch(function (error) {\n        this.current = 1;\n        _this.stepstatus = 'error';\n      });\n    },\n    //新增\n    create: function create() {\n      var _this8 = this;\n\n      var _this = this;\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          adduser(values).then(function (res) {\n            if (res.data.code == '0000') {\n              _this8.id = res.data.extend;\n\n              _this8.$emit('fresh');\n\n              _this8.getList(); //this.$message.success(res.data.message)\n\n            } else {\n              _this8.$message.error(res.data.message);\n\n              _this.stepstatus = 'error';\n            }\n          }).catch(function (error) {\n            _this.stepstatus = 'error';\n          }); //this.showVisible = false\n        }\n      });\n    },\n    //修改\n    update: function update() {\n      var _this9 = this;\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          updateUser(values).then(function (res) {\n            //console.log(res)\n            if (res.data.code == '0000') {\n              _this9.getList();\n\n              _this9.$message.success(res.data.message);\n\n              _this9.$emit('fresh');\n            } else {\n              _this9.$message.error(res.data.message);\n            }\n          });\n        }\n      });\n    },\n    onSelectChange: function onSelectChange(selectedRowKeys) {\n      console.info(selectedRowKeys);\n      this.selectedRowKeys = selectedRowKeys;\n    },\n    //健康状态\n    healthType: function healthType(status) {\n      if (status == '0') {\n        return 'success';\n      } else if (status == '1') {\n        return 'warning';\n      } else if (status == '2') {\n        return 'error';\n      } else {\n        return 'default';\n      }\n    },\n    toggle: function toggle() {\n      this.expand = !this.expand;\n    },\n    //关闭\n    onClose: function onClose() {\n      this.showVisible = false;\n      this.form.resetFields();\n      this.$message.info('已取消操作！');\n    },\n    //选择归属ecc展示系统\n    showBounced: function showBounced() {\n      this.$refs.bounced.showChildrenDrawer(); // console.log(this.$refs.bounced)\n    }\n  }\n};",{"version":3,"sources":["create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t<a-drawer\r\n\t          placement=\"right\"\r\n\t          :closable=\"showCanel\"\r\n\t          :visible=\"showVisible\"\r\n\t\t\t   @close=\"onClose\"\r\n\t          width=\"1100px\">\r\n\t\t\t\t<span slot=\"title\">\r\n\t\t\t\t\t<a-icon :type=\"iconType\"/>&nbsp; {{title}}\r\n\t\t\t\t</span>\r\n\t\t\t\t\r\n\t\t\t\t<a-steps size=\"small\" :current=\"current\" :status = \"stepstatus\" >\r\n\t\t\t\t\t<a-step title=\"第一步\">\r\n\t\t\t\t\t\t<span slot=\"description\">{{title}}</span>\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t\t<a-step title=\"第二步\">\r\n\t\t\t\t\t\t<span slot=\"description\">角色管理</span>\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t\t<a-step title=\"结束\">\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t</a-steps>\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t<div class=\"stepContent\" v-show=\"current==0\">\r\n\t\t\t\t<a-form class=\"ant-advanced-search-form\" style=\"border:none;\" :form=\"form\">\r\n\t\t\t\t  <a-row :gutter=\"24\">\r\n\t\t\t\t    <a-col :span=\"24\">\r\n\t\t\t\t      <a-form-item label=\"登录名\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t    \t\t  <a-input type=\"hidden\" placeholder=\"请输入登录名\" :disabled=\"disabled\" v-decorator=\"['id']\"/>\r\n\t\t\t\t            <a-input placeholder=\"请输入登录名\" :disabled=\"disabled\" v-decorator=\"['login',rule.login]\"/>\r\n\t\t\t\t      </a-form-item>\r\n\t\t\t\t    </a-col>\r\n\t\t\t\t    <a-col :span=\"24\">\r\n\t\t\t\t      <a-form-item label=\"姓名\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t        <a-input  placeholder=\"请输入姓名\"  :disabled=\"disabled\" v-decorator=\"['name',rule.name]\"  />\r\n\t\t\t\t      </a-form-item>\r\n\t\t\t\t    </a-col>\r\n\t\t\t\t    \r\n\t\t\t\t    <a-col :span=\"24\">\r\n\t\t\t\t      <a-form-item label=\"状态\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t        <a-radio-group   :disabled=\"disabled\" v-decorator=\"['status',rule.status]\" >\r\n\t\t\t\t          <a-radio value=\"0\">禁用</a-radio>\r\n\t\t\t\t          <a-radio value=\"1\">启用</a-radio>\r\n\t\t\t\t        </a-radio-group>\r\n\t\t\t\t      </a-form-item>\r\n\t\t\t\t    </a-col>\r\n\t\t\t\t\t\r\n\t\t\t\t  </a-row>\r\n\t\r\n\t\t\t\t</a-form>\r\n\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<!--第二步-->\r\n\t\t\t\t<div class=\"stepContent\" v-show=\"current==1\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<a-form class=\"ant-advanced-search-form\"\r\n\t\t\t\t\t        @submit=\"\" style=\"border:none;\">\r\n\t\t\t\t\t  <a-row :gutter=\"24\">\r\n\t\t\t\t\t   \r\n\t\t\t\t\t\t<a-col :span=\"8\">\r\n\t\t\t\t\t\t  <a-form-item label=\"角色名\" :label-col=\"{ span: 5 }\"\r\n\t\t\t\t\t\t\t:wrapper-col=\"{ span: 19 }\">\r\n\t\t\t\t\t\t    <a-input v-model=\"query.login\" placeholder=\"角色名\" />\r\n\t\t\t\t\t\t  </a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col :span=\"8\">\r\n\t\t\t\t\t\t  <a-form-item label=\"状态\" :label-col=\"{ span: 5 }\"\r\n\t\t\t\t\t\t\t:wrapper-col=\"{ span: 19 }\">\r\n\t\t\t\t\t\t<a-select defaultValue=\"0\" v-model=\"query.status\" style=\"width: 100%\" @change=\"handleChange\" placeholder=\"请选择状态\" allowClear=\"true\">\r\n\t\t\t\t\t\t  <a-select-option value=\"0\">禁用</a-select-option>\r\n\t\t\t\t\t\t  <a-select-option value=\"1\">启用</a-select-option>\r\n\t\t\t\t\t\t</a-select>\r\n\t\t\t\t\t\t  </a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t\t<a-col span=\"8\" :style=\"{ textAlign: 'right',paddingRight:'20px' }\">\r\n\t\t\t\t\t\t  <a-form-item>\r\n\t\t\t\t\t\t  <a-button type=\"primary\" @click=\"getList\" icon=\"search\">\r\n\t\t\t\t\t\t    搜&nbsp;&nbsp;索\r\n\t\t\t\t\t\t  </a-button>\r\n\t\t\t\t\t\t  <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\" icon=\"redo\">\r\n\t\t\t\t\t\t    重&nbsp;&nbsp;置\r\n\t\t\t\t\t\t  </a-button>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t    </a-form-item>\r\n\t\t\t\t\t\t</a-col>\r\n\t\t\t\t\t  </a-row>\r\n\t\t\t\t\t</a-form>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<a-table rowKey=\"id\" :rowSelection=\"{selectedRowKeys: selectedRowKeys, onChange: onSelectChange}\" :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t<span slot=\"status\" slot-scope=\"status\">\r\n\t\t\t\t\t\t     <a-badge :status=\"status=='0'?'success':'error'\"/>\r\n\t\t\t\t\t\t     {{status | statusFilter}}\t\r\n\t\t\t\t\t\t </span>\r\n\t\t\t\t\t</a-table>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 第三步 -->\r\n\t\t\t\t<div class=\"stepContent\" v-show=\"current==2\" style=\"text-align:center;marginTop:30px\">\r\n\t\t\t\t\t<a-icon type=\"check-circle\" style=\"color:green;font-size:50px;marginBottom:10px\"></a-icon>\r\n\t\t\t\t\t<p style=\"font-size:25px;\">{{this.dialogType=='create'?'新增成功':'修改成功'}}</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div :style=\"{\r\n\t\t\t\t               position: 'absolute',\r\n\t\t\t\t               left: 0,\r\n\t\t\t\t               bottom: 0,\r\n\t\t\t\t               width: '100%',\r\n\t\t\t\t               borderTop: '1px solid #e9e9e9',\r\n\t\t\t\t               padding: '10px 16px',\r\n\t\t\t\t               background: '#fff',\r\n\t\t\t\t               textAlign: 'right',\r\n\t\t\t\t             }\">\r\n\t\t\t\t\t<a-button type=\"primary\" @click=\"submitCreate\" v-show=\"current!=2\" :style=\"{marginRight:'5px'}\">\r\n\t\t\t\t\t\t\t   提交\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t\t<a-button type=\"success\" v-show=\"showNext\" @click=\"goNext\" :style=\"{marginRight:'5px'}\">\r\n\t\t\t\t\t\t\t   跳过\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t    <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\" v-if=\"showCanel\"> {{canelTitle}} </a-button>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</a-drawer>\r\n\t\t\t\t<bounced ref='bounced' @showId=\"showId\"></bounced>\r\n\t\t\t</div>\t\n</template>\n\n<script>\r\n\timport {adduser,getUsersByPage ,getRolesByPage ,addUserIdAndRoleIds ,getRoleIdsByUserId ,updateUser} from '@/api/system.js';\r\n\t\r\n\t// import bounced from './bounced';\r\n\t export default {\r\n\t\tfilters:{\r\n\t\t\tstatusFilter(status){\r\n\t\t\t\tconst statusMap={\r\n\t\t\t\t\t'0':'启用',\r\n\t\t\t\t\t'1':'禁用'\r\n\t\t\t\t}\r\n\t\t\t\treturn statusMap[status]\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tmonStatusFilter(status){\r\n\t\t\t\tconst statusMap={\r\n\t\t\t\t\t'0':'操作系统',\r\n\t\t\t\t\t'1':'中间件',\r\n\t\t\t\t\t'2':'DB',\r\n\t\t\t\t\t'3':'应用'\r\n\t\t\t\t}\r\n\t\t\t\treturn statusMap[status]\r\n\t\t\t}\r\n\t\t\t\r\n\t\t},\r\n\t\t \r\n\t\t components:{\r\n\t\t\t// bounced\r\n\t\t },\r\n\t\t data(){\r\n\t\t\t return {\r\n\t\t\t\tquery: {\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: undefined,\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t},\r\n\t\t\t\t \r\n\t\t\t\ttitle:'用户管理新增',\r\n\t\t\t\texpand: false,\r\n\t\t\t\t dialogType:'',\r\n\t\t\t\t showNext:false,\r\n\t\t\t\t canelTitle:'取消',\r\n\t\t\t\t stepstatus:'process',\r\n\t\t\t\t showStatus:true,\r\n\t\t\t\t loading:false,\r\n\t\t\t\t showVisible: false,\r\n\t\t\t\t selectedRowKeys:[],\r\n\t\t\t\t id:\"\",\r\n\t\t\t\t current:0,\r\n\t\t\t\t form: this.$form.createForm(this),\r\n\t\t\t\t rule:{\r\n\t\t\t\t   login:{ rules: [{ required: true, message: '请输入用户名' }],initialValue:''},\r\n\t\t\t\t   name:{ rules: [{ required: true, message: '请输入姓名' }],initialValue:''},\r\n\t\t\t\t   status:{ rules: [{ required: true, message: '请选择状态' }],initialValue:'1'},\r\n\t\t\t\t },\r\n\t\t\t\tcolumns: [\r\n\t\t\t\t  { title: '角色ID', dataIndex: 'id',align:'center' },\r\n\t\t\t\t  { title: '角色名称', dataIndex: 'name' ,align:'center'},\r\n\t\t\t\t  { title: '角色描述', dataIndex: 'desc',align:'center' },\r\n\t\t\t\t  { title: '角色状态', dataIndex: 'status',align:'center',scopedSlots: { customRender: 'status' } },\r\n\t\t\t\t \r\n\t\t\t\t],\r\n\t\tlist: [\r\n\t\t],\r\n\t\tpagination: {\r\n\t\t\t total:0,\r\n\t\t     defaultPageSize:5,\r\n\t\t     showTotal: total => `共 ${total} 条数据`,\r\n\t\t     showSizeChanger:true,\r\n\t\t     pageSizeOptions: ['5', '10', '15', '20'],\r\n\t\t     onChange:(page, pageSize)=>{\r\n\t\t       this.pagechage(page, pageSize);\r\n\t\t     },\r\n\t\t\t onShowSizeChange:(current,pageSize)=>{\r\n\t\t\t\t this.pageSizeChange(pageSize);\r\n\t\t\t }\r\n\t\t}\r\n\t\t\t }\r\n\t\t },\r\n\t\t computed: {\r\n\t\t   rowSelection() {\r\n\t\t \tconst { selectedRowKeys } = this;\r\n\t\t \treturn {\r\n\t\t \t  onChange: (selectedRowKeys, selectedRows) => {\r\n\t\t \t\t// console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n\t\t \t\tthis.enterData=selectedRows\r\n\t\t \t\t//console.log(this.enterData)\r\n\t\t \t  },\r\n\t\t \t\r\n\t\t \t};\r\n\t\t   },\r\n\t\t   \r\n\t\t },\r\n\t\t\r\n\t\t methods:{\r\n\t\t\t //显示绑定关联ID\r\n\t\t\t showId(query){\r\n\t\t\t\tthis.form.setFieldsValue(query)\r\n\t\t\t \t//console.log(query)\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t //新增\r\n\t\t\t CreateDialog() {\r\n\t\t\t\tthis.title='用户管理新增'\r\n\t\t\t\tthis.showNext = false\r\n\t\t\t\tthis.showStatus=true\r\n\t\t\t\tthis.iconType =\"form\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.disabled=false\r\n\t\t\t\tthis.showVisible = true\r\n\t\t\t\tthis.current = 0\r\n\t\t\t\tthis.dialogType='create'\r\n\t\t\t\tthis.stepstatus =\"process\"\r\n\t\t\t\tthis.canelTitle=\"取消\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.selectedRowKeys = []\r\n\t\t\t\tthis.form.resetFields();//清除缓存数据\r\n\t\t\t\tthis.query={\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: '',\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t}\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t // 修改\r\n\t\t\t updateDialog(query){\r\n\t\t\t\tthis.title='用户管理修改'\r\n\t\t\t\tthis.showStatus=true\r\n\t\t\t\tthis.iconType =\"form\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.disabled=false\r\n\t\t\t\tthis.showVisible = true\r\n\t\t\t\tthis.current = 0\r\n\t\t\t\tthis.dialogType='update'\r\n\t\t\t\tthis.canelTitle=\"取消\"\r\n\t\t\t\tthis.stepstatus =\"process\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.selectedRowKeys = []\r\n\t\t\t\tthis.id=query.id;\r\n\t\t\t\tthis.query={\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: '',\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t}\r\n\t\t\t\tthis.form.resetFields();//清除缓存数据 \r\n\t\t\t\t this.showNext = true\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t    this.form.setFieldsValue(query)\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t getRoleIdsByUserId(){\r\n\t\t\t\t  let _this = this\r\n\t\t\t\t getRoleIdsByUserId({userId:this.id}).then(res=>{\r\n\t\t\t\t \tif(res.data.code=='0000'){\r\n\t\t\t\t \t\tthis.canelTitle=\"关闭\"\r\n\t\t\t\t \t\tthis.showCanel = true\r\n\t\t\t\t \t\tthis.showNext = true\r\n\t\t\t\t \t\tthis.current=1\r\n\t\t\t\t\t\tthis.selectedRowKeys = res.data.extend;\r\n\t\t\t\t \t\t}else{\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\t\t\t\t \t\t }\r\n\t\t\t\t \t\t}).catch(function(error){\r\n\t\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t \t\t _this.stepstatus = 'error';\r\n\t\t\t\t \t\t})\r\n\t\t\t },\r\n\t\t\t submitCreate(){\r\n\t\t\t\t if(this.current ==0){\r\n\t\t\t\t\t if(this.dialogType==\"create\"){\r\n\t\t\t\t\t\t this.create();\r\n\t\t\t\t\t }else if(this.dialogType==\"update\"){\r\n\t\t\t\t\t\t this.update();\r\n\t\t\t\t\t }\r\n\t\t\t\t\t \r\n\t\t\t\t }else if(this.current == 1){//添加关联表信息\r\n\t\t\t\t\t this.addUserIdAndRoleIds();\r\n\t\t\t\t }else{\r\n\t\t\t\t\t this.current=2\r\n\t\t\t\t }\r\n\t\t\t },\r\n\t\t\t // 直接进入第三步\r\n\t\t\t goNext(){\r\n\t\t\t\t if(this.current==0){\r\n\t\t\t\t\t\r\n\t\t\t\t\t  this.getList();\r\n\t\t\t\t\t  \r\n\t\t\t\t }else{\r\n\t\t\t\t\t this.canelTitle=\"关闭\"\r\n\t\t\t\t\t this.showCanel = true\r\n\t\t\t\t\t this.showNext = false\r\n\t\t\t\t\t  this.current=2\r\n\t\t\t\t }\r\n\t\t\t\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t \r\n\t\t\t addUserIdAndRoleIds(){\r\n\t\t\t\t let _this = this\r\n\t\t\t\t addUserIdAndRoleIds({userId:this.id,roleIds:this.selectedRowKeys.join(\",\")}).then(res=>{\r\n\t\t\t\t\t if(res.data.code=='0000'){\r\n\t\t\t\t\t\t this.canelTitle=\"关闭\"\r\n\t\t\t\t\t\t this.showCanel = true\r\n\t\t\t\t\t\t this.showNext = false\r\n\t\t\t\t\t\t this.current=2\r\n\t\t\t\t\t }else{\r\n\t\t\t\t\t\t this.$message.error(res.data.message)\r\n\t\t\t\t\t\t _this.stepstatus = 'error';\r\n\t\t\t\t\t }\r\n\t\t\t\t }).catch(function(error){\r\n\t\t\t\t\t\t _this.stepstatus = 'error';\r\n\t\t\t\t\t});\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t getList(){\r\n\t\t\t \tthis.loading=true\r\n\t\t\t \t getRolesByPage(this.query).then(res=>{\r\n\t\t\t \t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\tthis.showNext = true \r\n\t\t\t \t\t\tthis.loading=false\r\n\t\t\t\t\t\tthis.showCanel = false\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t \t\t\tconsole.log(res)\r\n\t\t\t \t\t\tthis.list = res.data.extend.list\r\n\t\t\t \t\t\tthis.pagination.total = res.data.extend.total;\r\n\t\t\t\t\t\tif(this.dialogType==\"update\"){\r\n\t\t\t\t\t\t\tthis.getRoleIdsByUserId()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t \t\t}else{\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\t\t\t \t\t\tthis.loading=false\r\n\t\t\t \t\t\tthis.$message.error(res.data.message)\r\n\t\t\t \t\t}\r\n\t\t\t \t }).catch(function(error){\r\n\t\t\t\t\t\t\t  this.current=1;\r\n\t\t\t\t\t\t\t  _this.stepstatus = 'error';\r\n\t\t\t\t\t\t  })\r\n\t\t\t },\r\n\t\t\t //新增\r\n\t\t\t create(){\r\n\t\t\t\t let _this= this;\r\n\t\t\t \t\t this.form.validateFields((err, values) => {\r\n\t\t\t \t\t  if(!err){\r\n\t\t\t \t\t\t  adduser(values).then(res=>{\r\n\t\t\t \t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t\tthis.id = res.data.extend;\r\n\t\t\t\t\t\t\t\tthis.$emit('fresh')\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t \t\t\t\t\t//this.$message.success(res.data.message)\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t \t\t\t\t\t\r\n\t\t\t \t\t\t\t}else{\r\n\t\t\t \t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\t\t\t \t\t\t\t}\r\n\t\t\t \t\t\t  }).catch(function(error){\r\n\t\t\t\t\t\t\t  _this.stepstatus = 'error';\r\n\t\t\t\t\t\t  })\r\n\t\t\t \t\t\t  //this.showVisible = false\r\n\t\t\t \t\t\t}\r\n\t\t\t \t\t  });\r\n\t\t\t },\r\n\t\t\t //修改\r\n\t\t\t update(){\r\n\t\t\t \t\t  this.form.validateFields((err, values) => {\r\n\t\t\t \t\t   if(!err){\r\n\t\t\t \t\t\t  updateUser(values).then(res=>{\r\n\t\t\t \t\t\t\t  //console.log(res)\r\n\t\t\t \t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t \t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t \t\t\t\t\tthis.$emit('fresh')\r\n\t\t\t \t\t\t\t}else{\r\n\t\t\t \t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t \t\t\t\t}\r\n\t\t\t \t\t\t  })\r\n\t\t\t \t\t\t  \r\n\t\t\t \t\t\t}\r\n\t\t\t \t\t   });\r\n\t\t\t },\r\n\t\t\t onSelectChange(selectedRowKeys) {\r\n\t\t\t\t console.info(selectedRowKeys)\r\n\t\t\t   this.selectedRowKeys = selectedRowKeys;\r\n\t\t\t },\r\n\t\t\t //健康状态\r\n\t\t\t healthType(status){\r\n\t\t\t\t  if(status=='0'){\r\n\t\t\t\t\treturn 'success'\r\n\t\t\t\t  }else if(status=='1'){\r\n\t\t\t\t\treturn 'warning'\r\n\t\t\t\t  }else if(status=='2'){\r\n\t\t\t\t\treturn 'error'\r\n\t\t\t\t  }\r\n\t\t\t\t  else{\r\n\t\t\t\t\treturn 'default'\r\n\t\t\t\t  }\r\n\t\t\t },\r\n\t\t\t toggle() {\r\n\t\t\t \tthis.expand = !this.expand\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t //关闭\r\n\t\t\t onClose(){\r\n\t\t\t\t  this.showVisible = false;\r\n\t\t\t\t  this.form.resetFields();\r\n\t\t\t\t  this.$message.info('已取消操作！')\r\n\t\t\t },\r\n\t\t\t \r\n\t\t\t //选择归属ecc展示系统\r\n\t\t\t showBounced(){\r\n\t\t\t \tthis.$refs.bounced.showChildrenDrawer()\r\n\t\t\t \t// console.log(this.$refs.bounced)\r\n\t\t\t },\r\n\t\t },\r\n\t\r\n\t }\r\n\t\n</script>\n\n<style>\r\n\t.stepContent{\r\n\t\tmargin-top:30px;\r\n\t}\n</style>\n"],"sourceRoot":"src/views/user"}]}