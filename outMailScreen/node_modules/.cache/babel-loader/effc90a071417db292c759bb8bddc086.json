{"remainingRequest":"D:\\oesbecc\\outScreen\\node_modules\\thread-loader\\dist\\cjs.js!D:\\oesbecc\\outScreen\\node_modules\\babel-loader\\lib\\index.js!D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\oesbecc\\outScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\oesbecc\\outScreen\\src\\views\\role\\create.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\oesbecc\\outScreen\\src\\views\\role\\create.vue","mtime":1637304821603},{"path":"D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626312140594},{"path":"D:\\oesbecc\\outScreen\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1626312141832},{"path":"D:\\oesbecc\\outScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1626312110547},{"path":"D:\\oesbecc\\outScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626312140594},{"path":"D:\\oesbecc\\outScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1626312141896}],"contextDependencies":[],"result":["import _toConsumableArray from \"D:\\\\oesbecc\\\\outScreen\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/toConsumableArray\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { addRole, getUsersByPage, getMenusAll, addRoleIdAndMenuIds as _addRoleIdAndMenuIds, getMenuIdsByRoleId as _getMenuIdsByRoleId, updateUser } from '@/api/system.js'; // import bounced from './bounced';\n\nexport default {\n  filters: {\n    statusFilter: function statusFilter(status) {\n      var statusMap = {\n        '0': '启用',\n        '1': '禁用'\n      };\n      return statusMap[status];\n    }\n  },\n  components: {// bounced\n  },\n  data: function data() {\n    var _this2 = this;\n\n    return {\n      checkedKeysResult: [],\n      query: {\n        login: '',\n        name: '',\n        status: undefined,\n        page: 1,\n        pageSize: 5\n      },\n      listQuery: {\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      },\n      statusmap: {\n        '0': '停用',\n        '1': '启用'\n      },\n      typemap: {\n        '0': '一级菜单',\n        '1': '二级菜单'\n      },\n      innerCheckedKeys: '',\n      title: '角色管理新增',\n      expand: false,\n      dialogType: '',\n      showNext: false,\n      canelTitle: '取消',\n      stepstatus: 'process',\n      showStatus: true,\n      loading: false,\n      showVisible: false,\n      selectedRowKeys: [],\n      id: \"\",\n      current: 0,\n      form: this.$form.createForm(this),\n      rule: {\n        name: {\n          rules: [{\n            required: true,\n            message: '请输入角色姓名'\n          }],\n          initialValue: ''\n        },\n        desc: {\n          rules: [{\n            required: true,\n            message: '请输入角色描述'\n          }],\n          initialValue: ''\n        },\n        status: {\n          rules: [{\n            required: true,\n            message: '请输入角色状态'\n          }],\n          initialValue: ''\n        }\n      },\n      treeData: [],\n      replaceFields: {\n        children: 'node',\n        title: 'name',\n        key: 'id'\n      },\n      pagination: {\n        total: 0,\n        defaultPageSize: 5,\n        showTotal: function showTotal(total) {\n          return \"\\u5171 \".concat(total, \" \\u6761\\u6570\\u636E\");\n        },\n        showSizeChanger: true,\n        pageSizeOptions: ['5', '10', '15', '20'],\n        onChange: function onChange(page, pageSize) {\n          _this2.pagechage(page, pageSize);\n        },\n        onShowSizeChange: function onShowSizeChange(current, pageSize) {\n          _this2.pageSizeChange(pageSize);\n        }\n      }\n    };\n  },\n  computed: {\n    rowSelection: function rowSelection() {\n      var _this3 = this;\n\n      var selectedRowKeys = this.selectedRowKeys;\n      return {\n        onChange: function onChange(selectedRowKeys, selectedRows) {\n          // console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\n          _this3.enterData = selectedRows; //console.log(this.enterData)\n        }\n      };\n    }\n  },\n  methods: {\n    //显示绑定关联ID\n    showId: function showId(query) {\n      this.form.setFieldsValue(query); //console.log(query)\n    },\n    //新增\n    CreateDialog: function CreateDialog() {\n      this.title = '用户管理新增';\n      this.showNext = false;\n      this.showStatus = true;\n      this.iconType = \"form\";\n      this.showCanel = true;\n      this.disabled = false;\n      this.showVisible = true;\n      this.current = 0;\n      this.dialogType = 'create';\n      this.stepstatus = \"process\";\n      this.canelTitle = \"取消\";\n      this.showCanel = true;\n      this.selectedRowKeys = [];\n      this.form.resetFields(); //清除缓存数据\n\n      this.query = {\n        login: '',\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      };\n    },\n    // 修改\n    updateDialog: function updateDialog(query) {\n      var _this4 = this;\n\n      this.title = '用户管理修改';\n      this.showStatus = true;\n      this.iconType = \"form\";\n      this.showCanel = true;\n      this.disabled = false;\n      this.showVisible = true;\n      this.current = 0;\n      this.dialogType = 'update';\n      this.canelTitle = \"取消\";\n      this.stepstatus = \"process\";\n      this.showCanel = true;\n      this.selectedRowKeys = [];\n      this.id = query.id;\n      this.query = {\n        login: '',\n        name: '',\n        status: '',\n        page: 1,\n        pageSize: 5\n      };\n      this.form.resetFields(); //清除缓存数据\n\n      this.showNext = true;\n      this.$nextTick(function () {\n        _this4.form.setFieldsValue(query);\n      });\n    },\n    getMenuIdsByRoleId: function getMenuIdsByRoleId() {\n      var _this5 = this;\n\n      var _this = this;\n\n      _getMenuIdsByRoleId({\n        roleId: this.id\n      }).then(function (res) {\n        if (res.data.code == '0000') {\n          _this5.canelTitle = \"关闭\";\n          _this5.showCanel = true;\n          _this5.showNext = true;\n          _this5.current = 1;\n          _this5.innerCheckedKeys = res.data.extend;\n        } else {\n          _this5.current = 1;\n          _this.stepstatus = 'error';\n        }\n      }).catch(function (error) {\n        this.current = 1;\n        _this.stepstatus = 'error';\n      });\n    },\n    submitCreate: function submitCreate() {\n      if (this.current == 0) {\n        if (this.dialogType == \"create\") {\n          this.create();\n        } else if (this.dialogType == \"update\") {\n          this.update();\n        }\n      } else if (this.current == 1) {\n        //添加关联表信息\n        this.addRoleIdAndMenuIds();\n      } else {\n        this.current = 2;\n      }\n    },\n    // 直接进入第三步\n    goNext: function goNext() {\n      if (this.current == 0) {\n        this.getList();\n      } else {\n        this.canelTitle = \"关闭\";\n        this.showCanel = true;\n        this.showNext = false;\n        this.current = 2;\n      }\n    },\n    addRoleIdAndMenuIds: function addRoleIdAndMenuIds() {\n      var _this6 = this;\n\n      var _this = this;\n\n      _addRoleIdAndMenuIds({\n        roleId: this.id,\n        menuIds: this.checkedKeysResult.join(\",\")\n      }).then(function (res) {\n        if (res.data.code == '0000') {\n          _this6.canelTitle = \"关闭\";\n          _this6.showCanel = true;\n          _this6.showNext = false;\n          _this6.current = 2;\n        } else {\n          _this6.$message.error(res.data.message);\n\n          _this.stepstatus = 'error';\n        }\n      }).catch(function (error) {\n        _this.stepstatus = 'error';\n      });\n    },\n    getList: function getList() {\n      var _this7 = this;\n\n      getMenusAll(this.query).then(function (res) {\n        if (res.data.code == '0000') {\n          _this7.showNext = true;\n          _this7.showCanel = false;\n          _this7.current = 1;\n          console.log(res);\n          var list = res.data.extend;\n\n          for (var i = 0; i < list.length; i++) {\n            list[i].scopedSlots = {\n              title: 'custom'\n            };\n\n            for (var j = 0; j < list[i].node.length; j++) {\n              list[i].node[j].scopedSlots = {\n                title: 'custom'\n              };\n            }\n          }\n\n          _this7.treeData = list;\n\n          if (_this7.dialogType == \"update\") {\n            _this7.getMenuIdsByRoleId();\n          }\n        } else {\n          _this7.current = 1;\n          _this.stepstatus = 'error';\n\n          _this7.$message.error(res.data.message);\n        }\n      }).catch(function (error) {\n        this.current = 1;\n        _this.stepstatus = 'error';\n      });\n    },\n    //新增\n    create: function create() {\n      var _this8 = this;\n\n      var _this = this;\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          addRole(values).then(function (res) {\n            if (res.data.code == '0000') {\n              _this8.id = res.data.extend;\n\n              _this8.$emit('fresh');\n\n              _this8.getList(); //this.$message.success(res.data.message)\n\n            } else {\n              _this8.$message.error(res.data.message);\n\n              _this.stepstatus = 'error';\n            }\n          }).catch(function (error) {\n            _this.stepstatus = 'error';\n          }); //this.showVisible = false\n        }\n      });\n    },\n    //修改\n    update: function update() {\n      var _this9 = this;\n\n      this.form.validateFields(function (err, values) {\n        if (!err) {\n          updateUser(values).then(function (res) {\n            //console.log(res)\n            if (res.data.code == '0000') {\n              _this9.getList();\n\n              _this9.$message.success(res.data.message);\n\n              _this9.$emit('fresh');\n            } else {\n              _this9.$message.error(res.data.message);\n            }\n          });\n        }\n      });\n    },\n    onSelectChange: function onSelectChange(selectedRowKeys) {\n      console.info(selectedRowKeys);\n      this.selectedRowKeys = selectedRowKeys;\n    },\n    //健康状态\n    healthType: function healthType(status) {\n      if (status == '0') {\n        return 'success';\n      } else if (status == '1') {\n        return 'warning';\n      } else if (status == '2') {\n        return 'error';\n      } else {\n        return 'default';\n      }\n    },\n    toggle: function toggle() {\n      this.expand = !this.expand;\n    },\n    //关闭\n    onClose: function onClose() {\n      this.showVisible = false;\n      this.form.resetFields();\n      this.$message.info('已取消操作！');\n    },\n    //选择归属ecc展示系统\n    showBounced: function showBounced() {\n      this.$refs.bounced.showChildrenDrawer(); // console.log(this.$refs.bounced)\n    },\n    onSelect: function onSelect(selectedKeys, info) {\n      console.log('selected', selectedKeys, info);\n    },\n    onCheck: function onCheck(checkedKeys, info) {\n      this.checkedKeysResult = [].concat(_toConsumableArray(checkedKeys), _toConsumableArray(info.halfCheckedKeys));\n      this.innerCheckedKeys = checkedKeys;\n      console.log('onCheck', checkedKeys, info);\n    }\n  }\n};",{"version":3,"sources":["create.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n\t<div>\r\n\t<a-drawer\r\n\t          placement=\"right\"\r\n\t          :closable=\"showCanel\"\r\n\t          :visible=\"showVisible\"\r\n\t\t\t   @close=\"onClose\"\r\n\t          width=\"600px\">\r\n\t\t\t\t<span slot=\"title\">\r\n\t\t\t\t\t<a-icon type=\"form\"/>&nbsp; {{title}}\r\n\t\t\t\t</span>\r\n\r\n\t\t\t\t<a-steps size=\"small\" :current=\"current\" :status = \"stepstatus\" >\r\n\t\t\t\t\t<a-step title=\"第一步\">\r\n\t\t\t\t\t\t<span slot=\"description\">{{title}}</span>\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t\t<a-step title=\"第二步\">\r\n\t\t\t\t\t\t<span slot=\"description\">菜单分配</span>\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t\t<a-step title=\"结束\">\r\n\t\t\t\t\t</a-step>\r\n\t\t\t\t</a-steps>\r\n\r\n\r\n\r\n\t\t\t<div class=\"stepContent\" v-show=\"current==0\">\r\n\t\t\t\t<a-form class=\"ant-advanced-search-form\" style=\"border:none;\" :form=\"form\">\r\n\t\t\t\t  <a-row :gutter=\"24\">\r\n\r\n\t\t\t\t\t<a-col :span=\"24\">\r\n\t\t\t\t\t  <a-form-item label=\"角色名称\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t\t\t   <a-input type=\"hidden\"   v-decorator=\"['id']\"/>\r\n\t\t\t\t\t    <a-input  placeholder=\"请输入角色名称\"  :disabled=\"disabled\" v-decorator=\"['name',rule.name]\"  />\r\n\t\t\t\t\t  </a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\t\t\t\t\t<a-col :span=\"24\">\r\n\t\t\t\t\t  <a-form-item label=\"角色描述\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t\t    <a-input  placeholder=\"请输入角色描述\"  :disabled=\"disabled\" v-decorator=\"['desc',rule.desc]\"  />\r\n\t\t\t\t\t  </a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\r\n\t\t\t\t\t<a-col :span=\"24\">\r\n\t\t\t\t\t  <a-form-item label=\"状态\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t\t    <a-radio-group   :disabled=\"disabled\" v-decorator=\"['status',rule.status]\" >\r\n\t\t\t\t\t      <a-radio value=\"0\">禁用</a-radio>\r\n\t\t\t\t\t      <a-radio value=\"1\">启用</a-radio>\r\n\t\t\t\t\t    </a-radio-group>\r\n\t\t\t\t\t  </a-form-item>\r\n\t\t\t\t\t</a-col>\r\n\r\n\t\t\t\t  </a-row>\r\n\r\n\t\t\t\t</a-form>\r\n\t\t\t</div>\r\n\r\n\t\t\t\t<!--第二步-->\r\n\t\t\t\t<div class=\"stepContent\" v-show=\"current==1\">\r\n\r\n\t\t\t\t\t<a-tree\r\n\t\t\t\t\t  checkable\r\n\t\t\t\t\t  :treeData=\"treeData\"\r\n\t\t\t\t\t  :checkedKeys=\"innerCheckedKeys\"\r\n\t\t\t\t\t  @select=\"this.onSelect\"\r\n\t\t\t\t\t  @check=\"this.onCheck\"\r\n\t\t\t\t\t  :replaceFields=\"replaceFields\">\r\n\t\t\t\t\t    <template slot=\"custom\" slot-scope=\"item\">\r\n\t\t\t\t\t      <a-icon :type=\"item.icon\"/>&nbsp;\r\n\t\t\t\t\t      <span>{{ item.name }}</span>\r\n\t\t\t\t\t  </template>\r\n\t\t\t\t\t</a-tree>\r\n\r\n\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<!-- 第三步 -->\r\n\t\t\t\t<div class=\"stepContent\" v-show=\"current==2\" style=\"text-align:center;marginTop:30px\">\r\n\t\t\t\t\t<a-icon type=\"check-circle\" style=\"color:green;font-size:50px;marginBottom:10px\"></a-icon>\r\n\t\t\t\t\t<p style=\"font-size:25px;\">{{this.dialogType=='create'?'新增成功':'修改成功'}}</p>\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t<div :style=\"{\r\n\t\t\t\t               position: 'absolute',\r\n\t\t\t\t               left: 0,\r\n\t\t\t\t               bottom: 0,\r\n\t\t\t\t               width: '100%',\r\n\t\t\t\t               borderTop: '1px solid #e9e9e9',\r\n\t\t\t\t               padding: '10px 16px',\r\n\t\t\t\t               background: '#fff',\r\n\t\t\t\t               textAlign: 'right',\r\n\t\t\t\t             }\">\r\n\t\t\t\t\t<a-button type=\"primary\" @click=\"submitCreate\" v-show=\"current!=2\" :style=\"{marginRight:'5px'}\">\r\n\t\t\t\t\t\t\t   提交\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t\t<a-button type=\"success\" v-show=\"showNext\" @click=\"goNext\" :style=\"{marginRight:'5px'}\">\r\n\t\t\t\t\t\t\t   跳过\r\n\t\t\t\t\t</a-button>\r\n\t\t\t\t    <a-button :style=\"{marginRight: '8px'}\" @click=\"onClose\" v-if=\"showCanel\"> {{canelTitle}} </a-button>\r\n\t\t\t\t  </div>\r\n\t\t\t\t</a-drawer>\r\n\t\t\t\t<bounced ref='bounced' @showId=\"showId\"></bounced>\r\n\t\t\t</div>\n</template>\n\n<script>\r\n\timport {addRole,getUsersByPage ,getMenusAll ,addRoleIdAndMenuIds, getMenuIdsByRoleId,updateUser} from '@/api/system.js';\r\n\r\n\t// import bounced from './bounced';\r\n\t export default {\r\n\t\tfilters:{\r\n\t\t\tstatusFilter(status){\r\n\t\t\t\tconst statusMap={\r\n\t\t\t\t\t'0':'启用',\r\n\t\t\t\t\t'1':'禁用'\r\n\t\t\t\t}\r\n\t\t\t\treturn statusMap[status]\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t},\r\n\r\n\t\t components:{\r\n\t\t\t// bounced\r\n\t\t },\r\n\t\t data(){\r\n\t\t\t return {\r\n\t\t\t\tcheckedKeysResult:[],\r\n\t\t\t\tquery: {\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: undefined,\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t},\r\n\r\n\t\t\t\tlistQuery: {\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: '',\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t},\r\n\r\n\t\t\t\tstatusmap:{\r\n\t\t\t\t  '0':'停用',\r\n\t\t\t\t  '1':'启用'\r\n\t\t\t\t},\r\n\t\t\t\ttypemap:{\r\n\t\t\t\t  '0':'一级菜单',\r\n\t\t\t\t  '1':'二级菜单'\r\n\t\t\t\t},\r\n\r\n\t\t\t\tinnerCheckedKeys:'',\r\n\r\n\t\t\t\ttitle:'角色管理新增',\r\n\t\t\t\texpand: false,\r\n\t\t\t\t dialogType:'',\r\n\t\t\t\t showNext:false,\r\n\t\t\t\t canelTitle:'取消',\r\n\t\t\t\t stepstatus:'process',\r\n\t\t\t\t showStatus:true,\r\n\t\t\t\t loading:false,\r\n\t\t\t\t showVisible: false,\r\n\t\t\t\t selectedRowKeys:[],\r\n\t\t\t\t id:\"\",\r\n\t\t\t\t current:0,\r\n\t\t\t\t form: this.$form.createForm(this),\r\n\t\t\t\t rule:{\r\n\t\t\t\t  name:{ rules: [{ required: true, message: '请输入角色姓名' }],initialValue:''},\r\n\t\t\t\t  desc:{ rules: [{ required: true, message: '请输入角色描述' }],initialValue:''},\r\n\t\t\t\t  status:{ rules: [{ required: true, message: '请输入角色状态' }],initialValue:''},\r\n\t\t\t\t },\r\n\r\n\t\t\t\ttreeData:[\r\n\t\t\t\t  ],\r\n\t\t\t\t  replaceFields:{\r\n\t\t\t\t    children:'node',\r\n\t\t\t\t    title:'name',\r\n\t\t\t\t    key:'id'\r\n\t\t\t\t  },\r\n\t\t\t\tpagination: {\r\n\t\t\t\t\t total:0,\r\n\t\t\t\t\t defaultPageSize:5,\r\n\t\t\t\t\t showTotal: total => `共 ${total} 条数据`,\r\n\t\t\t\t\t showSizeChanger:true,\r\n\t\t\t\t\t pageSizeOptions: ['5', '10', '15', '20'],\r\n\t\t\t\t\t onChange:(page, pageSize)=>{\r\n\t\t\t\t\t   this.pagechage(page, pageSize);\r\n\t\t\t\t\t },\r\n\t\t\t\t\t onShowSizeChange:(current,pageSize)=>{\r\n\t\t\t\t\t\t this.pageSizeChange(pageSize);\r\n\t\t\t\t\t }\r\n\t\t\t\t}\r\n\t\t\t }\r\n\t\t },\r\n\t\t computed: {\r\n\t\t   rowSelection() {\r\n\t\t \tconst { selectedRowKeys } = this;\r\n\t\t \treturn {\r\n\t\t \t  onChange: (selectedRowKeys, selectedRows) => {\r\n\t\t \t\t// console.log(`selectedRowKeys: ${selectedRowKeys}`, 'selectedRows: ', selectedRows);\r\n\t\t \t\tthis.enterData=selectedRows\r\n\t\t \t\t//console.log(this.enterData)\r\n\t\t \t  },\r\n\r\n\t\t \t};\r\n\t\t   },\r\n\r\n\t\t },\r\n\r\n\t\t methods:{\r\n\t\t\t //显示绑定关联ID\r\n\t\t\t showId(query){\r\n\t\t\t\tthis.form.setFieldsValue(query)\r\n\t\t\t \t//console.log(query)\r\n\t\t\t },\r\n\r\n\t\t\t //新增\r\n\t\t\t CreateDialog() {\r\n\t\t\t\tthis.title='用户管理新增'\r\n\t\t\t\tthis.showNext = false\r\n\t\t\t\tthis.showStatus=true\r\n\t\t\t\tthis.iconType =\"form\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.disabled=false\r\n\t\t\t\tthis.showVisible = true\r\n\t\t\t\tthis.current = 0\r\n\t\t\t\tthis.dialogType='create'\r\n\t\t\t\tthis.stepstatus =\"process\"\r\n\t\t\t\tthis.canelTitle=\"取消\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.selectedRowKeys = []\r\n\t\t\t\tthis.form.resetFields();//清除缓存数据\r\n\t\t\t\tthis.query={\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: '',\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t}\r\n\t\t\t },\r\n\r\n\t\t\t // 修改\r\n\t\t\t updateDialog(query){\r\n\t\t\t\tthis.title='用户管理修改'\r\n\t\t\t\tthis.showStatus=true\r\n\t\t\t\tthis.iconType =\"form\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.disabled=false\r\n\t\t\t\tthis.showVisible = true\r\n\t\t\t\tthis.current = 0\r\n\t\t\t\tthis.dialogType='update'\r\n\t\t\t\tthis.canelTitle=\"取消\"\r\n\t\t\t\tthis.stepstatus =\"process\"\r\n\t\t\t\tthis.showCanel = true\r\n\t\t\t\tthis.selectedRowKeys = []\r\n\t\t\t\tthis.id=query.id;\r\n\t\t\t\tthis.query={\r\n\t\t\t\t  login: '',\r\n\t\t\t\t  name: '',\r\n\t\t\t\t  status: '',\r\n\t\t\t\t  page:1,\r\n\t\t\t\t  pageSize:5\r\n\t\t\t\t}\r\n\t\t\t\tthis.form.resetFields();//清除缓存数据\r\n\t\t\t\t this.showNext = true\r\n\t\t\t\tthis.$nextTick(()=>{\r\n\t\t\t\t    this.form.setFieldsValue(query)\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t },\r\n\r\n\t\t\t getMenuIdsByRoleId(){\r\n\t\t\t\t  let _this = this\r\n\t\t\t\t getMenuIdsByRoleId({roleId:this.id}).then(res=>{\r\n\t\t\t\t \tif(res.data.code=='0000'){\r\n\t\t\t\t \t\tthis.canelTitle=\"关闭\"\r\n\t\t\t\t \t\tthis.showCanel = true\r\n\t\t\t\t \t\tthis.showNext = true\r\n\t\t\t\t \t\tthis.current=1\r\n\t\t\t\t\t\tthis.innerCheckedKeys = res.data.extend;\r\n\t\t\t\t \t\t}else{\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\t\t\t\t \t\t }\r\n\t\t\t\t \t\t}).catch(function(error){\r\n\t\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t \t\t _this.stepstatus = 'error';\r\n\t\t\t\t \t\t})\r\n\t\t\t },\r\n\t\t\t submitCreate(){\r\n\t\t\t\t if(this.current ==0){\r\n\t\t\t\t\t if(this.dialogType==\"create\"){\r\n\t\t\t\t\t\t this.create();\r\n\t\t\t\t\t }else if(this.dialogType==\"update\"){\r\n\t\t\t\t\t\t this.update();\r\n\t\t\t\t\t }\r\n\r\n\t\t\t\t }else if(this.current == 1){//添加关联表信息\r\n\t\t\t\t\t this.addRoleIdAndMenuIds();\r\n\t\t\t\t }else{\r\n\t\t\t\t\t this.current=2\r\n\t\t\t\t }\r\n\t\t\t },\r\n\t\t\t // 直接进入第三步\r\n\t\t\t goNext(){\r\n\t\t\t\t if(this.current==0){\r\n\r\n\t\t\t\t\t  this.getList();\r\n\r\n\t\t\t\t }else{\r\n\t\t\t\t\t this.canelTitle=\"关闭\"\r\n\t\t\t\t\t this.showCanel = true\r\n\t\t\t\t\t this.showNext = false\r\n\t\t\t\t\t  this.current=2\r\n\t\t\t\t }\r\n\r\n\t\t\t },\r\n\r\n\r\n\t\t\t addRoleIdAndMenuIds(){\r\n\t\t\t\t let _this = this\r\n\t\t\t\t addRoleIdAndMenuIds({roleId:this.id,menuIds:this.checkedKeysResult.join(\",\")}).then(res=>{\r\n\t\t\t\t\t if(res.data.code=='0000'){\r\n\t\t\t\t\t\t this.canelTitle=\"关闭\"\r\n\t\t\t\t\t\t this.showCanel = true\r\n\t\t\t\t\t\t this.showNext = false\r\n\t\t\t\t\t\t this.current=2\r\n\t\t\t\t\t }else{\r\n\t\t\t\t\t\t this.$message.error(res.data.message)\r\n\t\t\t\t\t\t _this.stepstatus = 'error';\r\n\t\t\t\t\t }\r\n\t\t\t\t }).catch(function(error){\r\n\t\t\t\t\t\t _this.stepstatus = 'error';\r\n\t\t\t\t\t});\r\n\t\t\t },\r\n\r\n\t\t\t getList(){\r\n\r\n\t\t\t \t getMenusAll(this.query).then(res=>{\r\n\t\t\t \t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\tthis.showNext = true\r\n\r\n\t\t\t\t\t\tthis.showCanel = false\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t \t\t\tconsole.log(res)\r\n\r\n\t\t\t \t\t\tlet list = res.data.extend;\r\n\t\t\t\t\t\tfor(var i=0;i<list.length;i++){\r\n\t\t\t\t\t\t\tlist[i].scopedSlots= { title: 'custom' }\r\n\t\t\t\t\t\t\tfor(var j=0;j<list[i].node.length;j++){\r\n\t\t\t\t\t\t\t\tlist[i].node[j].scopedSlots= { title: 'custom' }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tthis.treeData=list\r\n\r\n\t\t\t\t\t\tif(this.dialogType==\"update\"){\r\n\t\t\t\t\t\t\tthis.getMenuIdsByRoleId()\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t \t\t}else{\r\n\t\t\t\t\t\tthis.current=1;\r\n\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\r\n\t\t\t \t\t\tthis.$message.error(res.data.message)\r\n\t\t\t \t\t}\r\n\t\t\t \t }).catch(function(error){\r\n\t\t\t\t\t\t\t  this.current=1;\r\n\t\t\t\t\t\t\t  _this.stepstatus = 'error';\r\n\t\t\t\t\t\t  })\r\n\t\t\t },\r\n\t\t\t //新增\r\n\t\t\t create(){\r\n\t\t\t\t let _this= this;\r\n\t\t\t \t\t this.form.validateFields((err, values) => {\r\n\t\t\t \t\t  if(!err){\r\n\t\t\t \t\t\t  addRole(values).then(res=>{\r\n\t\t\t \t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t\tthis.id = res.data.extend;\r\n\t\t\t\t\t\t\t\tthis.$emit('fresh')\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\r\n\t\t\t \t\t\t\t\t//this.$message.success(res.data.message)\r\n\r\n\r\n\t\t\t \t\t\t\t}else{\r\n\t\t\t \t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t\t\t\t\t_this.stepstatus = 'error';\r\n\t\t\t \t\t\t\t}\r\n\t\t\t \t\t\t  }).catch(function(error){\r\n\t\t\t\t\t\t\t  _this.stepstatus = 'error';\r\n\t\t\t\t\t\t  })\r\n\t\t\t \t\t\t  //this.showVisible = false\r\n\t\t\t \t\t\t}\r\n\t\t\t \t\t  });\r\n\t\t\t },\r\n\t\t\t //修改\r\n\t\t\t update(){\r\n\t\t\t \t\t  this.form.validateFields((err, values) => {\r\n\t\t\t \t\t   if(!err){\r\n\t\t\t \t\t\t  updateUser(values).then(res=>{\r\n\t\t\t \t\t\t\t  //console.log(res)\r\n\t\t\t \t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t\tthis.getList();\r\n\t\t\t \t\t\t\t\tthis.$message.success(res.data.message)\r\n\t\t\t \t\t\t\t\tthis.$emit('fresh')\r\n\t\t\t \t\t\t\t}else{\r\n\t\t\t \t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t \t\t\t\t}\r\n\t\t\t \t\t\t  })\r\n\r\n\t\t\t \t\t\t}\r\n\t\t\t \t\t   });\r\n\t\t\t },\r\n\t\t\t onSelectChange(selectedRowKeys) {\r\n\t\t\t\t console.info(selectedRowKeys)\r\n\r\n\t\t\t   this.selectedRowKeys = selectedRowKeys;\r\n\t\t\t },\r\n\t\t\t //健康状态\r\n\t\t\t healthType(status){\r\n\t\t\t\t  if(status=='0'){\r\n\t\t\t\t\treturn 'success'\r\n\t\t\t\t  }else if(status=='1'){\r\n\t\t\t\t\treturn 'warning'\r\n\t\t\t\t  }else if(status=='2'){\r\n\t\t\t\t\treturn 'error'\r\n\t\t\t\t  }\r\n\t\t\t\t  else{\r\n\t\t\t\t\treturn 'default'\r\n\t\t\t\t  }\r\n\t\t\t },\r\n\t\t\t toggle() {\r\n\t\t\t \tthis.expand = !this.expand\r\n\t\t\t },\r\n\r\n\t\t\t //关闭\r\n\t\t\t onClose(){\r\n\t\t\t\t  this.showVisible = false;\r\n\t\t\t\t  this.form.resetFields();\r\n\t\t\t\t  this.$message.info('已取消操作！')\r\n\t\t\t },\r\n\r\n\t\t\t //选择归属ecc展示系统\r\n\t\t\t showBounced(){\r\n\t\t\t \tthis.$refs.bounced.showChildrenDrawer()\r\n\t\t\t \t// console.log(this.$refs.bounced)\r\n\t\t\t },\r\n\r\n\t\t\t onSelect(selectedKeys, info) {\r\n\t\t\t   console.log('selected', selectedKeys, info);\r\n\t\t\t },\r\n\t\t\t onCheck(checkedKeys, info) {\r\n\t\t\t     this.checkedKeysResult = [...checkedKeys, ...info.halfCheckedKeys];\r\n\t\t\t     this.innerCheckedKeys = checkedKeys;\r\n\t\t\t   console.log('onCheck', checkedKeys, info);\r\n\t\t\t },\r\n\r\n\t\t },\r\n\r\n\t }\r\n\n</script>\n\n<style>\r\n\t.stepContent{\r\n\t\tmargin-top:30px;\r\n\t}\n</style>\n"],"sourceRoot":"src/views/role"}]}