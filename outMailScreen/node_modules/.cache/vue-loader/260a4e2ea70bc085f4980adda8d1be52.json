{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\role\\edit.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\role\\edit.vue","mtime":1637304821604},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\css-loader\\index.js","mtime":1640070691346},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1640070694148},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\postcss-loader\\src\\index.js","mtime":1640070693882},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.padding20{\n  padding-bottom: 40px;\n}\n",{"version":3,"sources":["edit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwRA;AACA;AACA","file":"edit.vue","sourceRoot":"src/views/role","sourcesContent":["<template>\r\n\r\n  <a-drawer\r\n      class=\"padding20\"\r\n\t\t placement=\"right\"\r\n\t\t :closable=\"true\"\r\n\t\t @close=\"onClose\"\r\n\t\t :visible=\"showVisible\"\r\n\t\t width=\"1100px\">\r\n\t\t <span slot=\"title\">\r\n\t\t\t<a-icon type=\"form\"/>&nbsp; {{dialogTypeMap[dialogType]}}\r\n\r\n\t\t </span>\r\n\r\n\r\n\r\n\t<a-tabs >\r\n\t<a-tab-pane tab=\"角色信息\">\r\n\t\t<a-form :form=\"form\">\r\n\t\t  <a-row :gutter=\"24\">\r\n\r\n\r\n\t\t\t<a-col :span=\"24\">\r\n\t\t\t  <a-form-item label=\"角色名称\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t   <a-input type=\"hidden\"   v-decorator=\"['id']\"/>\r\n\t\t\t\t<a-input  placeholder=\"请输入角色名称\"  :disabled=\"disabled\" v-decorator=\"['name',rule.name]\"  />\r\n\t\t\t  </a-form-item>\r\n\t\t\t</a-col>\r\n\t\t\t<a-col :span=\"24\">\r\n\t\t\t  <a-form-item label=\"角色描述\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t<a-input  placeholder=\"请输入角色描述\"  :disabled=\"disabled\" v-decorator=\"['desc',rule.desc]\"  />\r\n\t\t\t  </a-form-item>\r\n\t\t\t</a-col>\r\n\r\n\t\t\t<a-col :span=\"24\">\r\n\t\t\t  <a-form-item label=\"状态\" :label-col=\"{ span: 4 }\" :wrapper-col=\"{ span: 20 }\">\r\n\t\t\t\t<a-radio-group   :disabled=\"disabled\" v-decorator=\"['status',rule.status]\" >\r\n\t\t\t\t  <a-radio value=\"0\">禁用</a-radio>\r\n\t\t\t\t  <a-radio value=\"1\">启用</a-radio>\r\n\t\t\t\t</a-radio-group>\r\n\t\t\t  </a-form-item>\r\n\t\t\t</a-col>\r\n\t\t  </a-row>\r\n\t\t</a-form>\r\n\r\n\t</a-tab-pane>\r\n\t</a-tabs>\r\n\r\n\t<a-tabs calss=\"padding20\">\r\n\t\t<a-tab-pane tab=\" 菜单信息 \">\r\n\t\t\t<a-table class=\"padding20\" :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n\t\t\t  <span slot=\"icon\" slot-scope=\"icon\">\r\n\t\t\t      <a-icon  :type=\"icon\"/>\r\n\t\t\t  </span>\r\n\t\t\t  <span slot=\"status\" slot-scope=\"status\">\r\n\t\t\t       <a-badge :status=\"status=='1'?'success':'error'\" />\r\n\t\t\t      {{statusmap[status]}}\r\n\t\t\t  </span>\r\n\t\t\t\t\t<span slot=\"type\" slot-scope=\"type\">\r\n\t\t\t\t\t    {{typemap[type]}}\r\n\t\t\t\t\t</span>\r\n\r\n\t\t\t  <span slot=\"operation\" slot-scope=\"text, record\">\r\n\t\t\t  <a  @click=\"showlist(record)\">查看</a>\r\n\t\t\t  <a-divider type=\"vertical\" />\r\n\t\t\t  <a-dropdown>\r\n\t\t\t    <a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n\t\t\t    更多 <a-icon type=\"down\" />\r\n\t\t\t    </a>\r\n\t\t\t    <a-menu slot=\"overlay\">\r\n\t\t\t    <a-menu-item>\r\n\t\t\t      <a href=\"javascript:;\" @click=\"update(record)\">修改</a>\r\n\t\t\t    </a-menu-item>\r\n\t\t\t    <a-menu-item>\r\n\t\t\t      <a href=\"javascript:;\" @click=\"deletList(record)\">删除</a>\r\n\t\t\t    </a-menu-item>\r\n\t\t\t    </a-menu>\r\n\t\t\t  </a-dropdown>\r\n\t\t\t    </span>\r\n\t\t\t</a-table>\r\n\t\t</a-tab-pane>\r\n\t</a-tabs>\r\n\r\n    <div class=\"modeButton\">\r\n      <a-button :style=\"{marginRight: '8px'}\"\r\n                @click=\"onClose\">\r\n        取消\r\n      </a-button>\r\n      <a-button @click=\"onSubmit\" type=\"primary\">{{SubmitTypeMap[dialogType]}}</a-button>\r\n    </div>\r\n  </a-drawer>\r\n\r\n</template>\r\n\r\n<script>\r\n\timport {addRole,updateRole,getMenuByRoleId} from '@/api/system.js';\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        form: this.$form.createForm(this),\r\n        dialogTypeMap: {\r\n          show: '角色详情',\r\n          create: '角色新增',\r\n          update: '角色修改'\r\n        },\r\n        \thackRest:false,\r\n          columns: [\r\n            { title: '菜单ID', dataIndex: 'id',align:'center' },\r\n            { title: '菜单名称', dataIndex: 'name',align:'center' },\r\n            { title: '菜单路径', dataIndex: 'path' ,align:'center'},\r\n  \t\t      { title: '菜单类型', dataIndex: 'type' ,align:'center',scopedSlots: { customRender: 'type' }},\r\n            { title: '父菜单', dataIndex: 'parentName' ,align:'center'},\r\n            { title: '菜单图标', dataIndex: 'icon' ,align:'center',width:'90px',scopedSlots: { customRender: 'icon' }},\r\n            { title: '状态', dataIndex: 'status',align:'center',scopedSlots: { customRender: 'status' } }\r\n          ],\r\n          listQuery:{\r\n            page:1,\r\n            pageSize:5,\r\n            roleId:''\r\n          },\r\n          query:{},\r\n          list:[],\r\n          pagination: {\r\n             total:0,\r\n               defaultPageSize:5,\r\n               showTotal: total => `共 ${total} 条数据`,\r\n               showSizeChanger:true,\r\n               pageSizeOptions: ['5', '10', '15', '20'],\r\n               onChange:(page, pageSize)=>{\r\n                 this.pagechage(page, pageSize);\r\n               },\r\n             onShowSizeChange:(current,pageSize)=>{\r\n               this.pageSizeChange(pageSize);\r\n             }\r\n          },\r\n        SubmitTypeMap: {\r\n          show: '确认',\r\n          create: '提交',\r\n          update: '提交'\r\n        },\r\n\r\n\t\tstatusmap:{\r\n\t\t  '0':'停用',\r\n\t\t  '1':'启用'\r\n\t\t},\r\n\t\ttypemap:{\r\n\t\t  '0':'一级菜单',\r\n\t\t  '1':'二级菜单'\r\n\t\t},\r\n        showVisible: false,\r\n        rule:{\r\n          name:{ rules: [{ required: true, message: '请输入角色姓名' }],initialValue:''},\r\n          desc:{ rules: [{ required: true, message: '请输入角色描述' }],initialValue:''},\r\n          status:{ rules: [{ required: true, message: '请输入角色状态' }],initialValue:''},\r\n        }\r\n      }\r\n    },\r\n    props: {\r\n      showVisible: Boolean\r\n    },\r\n\r\n    methods: {\r\n      //查看\r\n      ShowDialog(query) {\r\n        this.disabled = true\r\n        this.showVisible = true\r\n        this.dialogType = 'show'\r\n          this.query = query\r\n        \tthis.getList(query)\r\n        this.$nextTick(() => {\r\n          this.form.setFieldsValue(query)\r\n        })\r\n      },\r\n\r\n      //获取关联角色信息\r\n      getList(){\r\n        this.loading=true\r\n        this.listQuery.roleId = this.query.id\r\n         getMenuByRoleId(this.listQuery).then(res=>{\r\n          if(res.data.code=='0000'){\r\n            this.loading=false\r\n            console.log(res)\r\n            this.list = res.data.extend.list\r\n            this.pagination.total = res.data.extend.total;\r\n          }else{\r\n            this.loading=false\r\n            this.$message.error(res.data.message)\r\n          }\r\n         })\r\n      },\r\n\r\n      //新增\r\n      CreateDialog() {\r\n        this.disabled = false\r\n        this.showVisible = true\r\n        this.dialogType = 'create'\r\n      },\r\n      //修改\r\n  \t  UpdateDialog(query) {\r\n  \t  \tthis.disabled=false\r\n  \t    this.showVisible = true\r\n  \t  \tthis.dialogType='update'\r\n  \t\t  this.$nextTick(()=>{\r\n          \tthis.hackRest=true;\r\n  \t\t\tthis.form.setFieldsValue(query)\r\n  \t\t});\r\n  \t  },\r\n  \t  //关闭\r\n  \t  onClose(){\r\n  \t\t  this.showVisible = false;\r\n  \t\t  this.form.resetFields();\r\n  \t  },\r\n      //提交按钮\r\n        onSubmit() {\r\n       if(this.dialogType=='show'){\r\n        this.showVisible = false\r\n       }\r\n       if(this.dialogType=='create'){\r\n          this.create();\r\n       }\r\n       if(this.dialogType=='update'){\r\n          this.update();\r\n       }\r\n     },\r\n     create(){\r\n       this.form.validateFields((err, values) => {\r\n         if (err) {\r\n           this.$message.error(\"新增失败！\");\r\n         }else{\r\n          // var listArry=this.form.getFieldsValue()\r\n           //console.log(listArry)\r\n         addRole(values).then(res=>{\r\n           if(res.status==200){\r\n             this.$message.success('新增成功！')\r\n             this.$emit('fresh')\r\n           }else{\r\n             this.$message.error('新增失败！')\r\n           }\r\n           })\r\n           this.showVisible = false\r\n         }\r\n        });\r\n     },\r\n     update(){\r\n        this.form.validateFields((err, values) => {\r\n          console.info(values)\r\n        //  var listArry=this.form.getFieldsValue()\r\n          updateRole(values).then(res=>{\r\n            if(res.status==200){\r\n              this.$message.success('修改成功！')\r\n              this.$emit('fresh')\r\n              this.showVisible = false\r\n            }else{\r\n              this.$message.error('修改失败！')\r\n              this.showVisible = false\r\n            }\r\n          })\r\n        });\r\n        //end update\r\n     },\r\n     pageSizeChange(pageSize){\r\n       this.listQuery.pageNum = 1;\r\n       this.listQuery.pageSize = pageSize;\r\n       this.getList();\r\n     },\r\n     pagechage(pageNum, pageSize){\r\n\r\n       this.listQuery.pageNum= pageNum;\r\n         this.listQuery.pageSize = pageSize;\r\n       this.getList();\r\n     }\r\n\r\n\r\n    }\r\n  }\r\n\r\n</script>\r\n\r\n<style>\r\n  .padding20{\r\n    padding-bottom: 40px;\r\n  }\r\n</style>\r\n"]}]}