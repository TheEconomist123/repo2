{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\timeTask\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\timeTask\\index.vue","mtime":1637304821620},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1640070643981},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {getAllJobsByPage ,delJob,forbidJob,startJob} from '@/api/index.js';\r\nimport edit from './edit';\r\n\r\n  export default {\r\n\tfilters:{\r\n\t\tstatusFilter(status){\r\n\t\t\tconst statusMap={\r\n\t\t\t\t'0':'启用',\r\n\t\t\t\t'1':'禁用'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status]\r\n\t\t},\r\n\t\tFstatusFilter(status){\r\n\t\t\tconst statusMap={\r\n\t\t\t\t'1':'启用',\r\n\t\t\t\t'0':'禁用'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status]\r\n\t\t}\r\n\t},\r\n    data() {\r\n      return {\r\n        expand: false,\r\n\t\tloading:false,\r\n        form: this.$form.createForm(this),\r\n        columns: [\r\n\t\t  { title: '作业名称', dataIndex: 'processName' },\r\n          { title: 'Java类名', dataIndex: 'className' },\r\n\t\t  { title: '组名', dataIndex: 'groupName'},\r\n          { title: '调度表达式', dataIndex: 'cronExpr' },\r\n\t\t  { title: '调度说明', dataIndex: 'scheduleDesc'},\r\n          { title: '状态', dataIndex: 'isValid',align:'center', scopedSlots: { customRender: 'status_2' } },\r\n          { title: '操作',    dataIndex: 'operation',width:'160px',align:'center', scopedSlots: { customRender: 'operation' } }\r\n        ],\r\n        list: [\r\n        ],\r\n        pagination: {\r\n\t\t\t total:0,\r\n             defaultPageSize:5,\r\n             showTotal: total => `共 ${total} 条数据`,\r\n             showSizeChanger:true,\r\n             pageSizeOptions: ['5', '10', '15', '20'],\r\n             onChange:(page, pageSize)=>{\r\n               this.pagechage(page, pageSize);\r\n             },\r\n\t\t\t onShowSizeChange:(current,pageSize)=>{\r\n\t\t\t\t this.pageSizeChange(pageSize);\r\n\t\t\t }\r\n        },\r\n        showVisible: false,\r\n        record:{},\r\n\t\t\r\n\t\tlistQuery:{\r\n\t\t\tprocessName:'',\r\n\t\t\tisValid:'',\r\n\t\t\tpageNum:1,\r\n\t\t\tpageSize:5\r\n\t\t},\r\n\t\t\r\n      }\r\n    },\r\n    components:{\r\n      edit\r\n    },\r\n    computed: {\r\n      count() {\r\n        return this.expand ? 11 : 3\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.getList()\r\n\t},\r\n    methods: {\r\n\t\t//列表展示和搜索\r\n\t\tgetList(){\r\n\t\t\tthis.loading=true\r\n\t\t\t getAllJobsByPage(this.listQuery).then(res=>{\r\n\t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t\tthis.list = res.data.extend.list\r\n\t\t\t\t\tthis.pagination.total = res.data.extend.total;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t}\r\n\t\t\t })\r\n\t\t},\r\n\t\t\r\n\r\n\t\t  handleReset() {\r\n\t\t\tthis.form.resetFields()\r\n\t\t  },\r\n\r\n\t\t//查看更多\r\n\t\t  showlist(row) {\r\n\t\t\tthis.$refs.edit.ShowDialog(Object.assign({},row));\r\n\t\t  },\r\n\t\t  \r\n\t\t  //新增\r\n\t\t  createlist() {\r\n\t\t\tthis.$refs.edit.CreateDialog();\r\n\t\t  },\r\n\t\t  \r\n\t\t  //删除\r\n\t\t  deletList(row){\r\n\t\t\t  if(row.isValid==0){\r\n\t\t\t\tthis.$info({\r\n\t\t\t\t\ttitle:'提示',\r\n\t\t\t\t\tcontent:'启用状态下不可删除！',\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t  }else{\r\n\t\t\t\tvar _this=this\r\n\t\t\t\tthis.$confirm({\r\n\t\t\t\t  title:'确认删除？',\r\n\t\t\t\t  content:'确认删除本条记录，删除后不可恢复',\r\n\t\t\t\t  okType:'danger',\r\n\t\t\t\t  onOk(){\r\n\t\t\t\t\tdelJob({processId:row.processId}).then(res=>{\r\n\t\t\t\t\t\t//console.log(res)\r\n\t\t\t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t  },\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t})\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t  },\r\n\t\t  \r\n\t\t  //修改\r\n\t\t  update(row){\r\n\t\t\tthis.$refs.edit.UpdateDialog(row);  \r\n\t\t  },\r\n\t\t  \r\n\t\t  //修改状态\r\n\t\t  updatestatue(query){\r\n\t\t\tvar _this=this\r\n\t\t\tvar processId=query.processId\r\n\t\t\tif(query.isValid=='0'){// 0=》 启用    1 =》停用\r\n\t\t\t\tforbidJob({processId:processId}).then(res=>{\r\n\t\t\t\t\tif(res.data.code==\"0000\"){\r\n\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tstartJob({processId:processId}).then(res=>{\r\n\t\t\t\t\tif(res.data.code==\"0000\"){\r\n\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t  },\r\n\t\t  \r\n\t\t  //刷新数据\r\n\t\t  fresh(){\r\n\t\t\t  this.getList()\r\n\t\t  },\r\n\t\t   \r\n\t\t  onClose() {\r\n\t\t\tthis.showVisible = false\r\n\t\t  },\r\n\r\n\t\t  toggle() {\r\n\t\t\tthis.expand = !this.expand\r\n\t\t  },\r\n\t\t  pagechage(page, pageSize){\r\n\t\t\tthis.listQuery.pageNum = page;\r\n\t\t\tthis.listQuery.pageSize = pageSize;\r\n\t\t\tthis.getList();\r\n\t\t  },\r\n\t\t  pageSizeChange(pageSize){\r\n\t\t\t  this.listQuery.pageNum = 1;\r\n\t\t\t  this.listQuery.pageSize = pageSize;\r\n\t\t\t  this.getList();\r\n\t\t  }\r\n    }\r\n  }\r\n\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/timeTask","sourcesContent":["<template>\r\n\r\n  <div class=\"components-form-demo-advanced-search\">\r\n    <a-form class=\"ant-advanced-search-form\"\r\n            :form=\"form\"\r\n            @submit=\"\" style=\"border:none;\">\r\n      <a-row :gutter=\"24\">\r\n        <a-col :span=\"6\">\r\n          <a-form-item label=\"作业名称\" :label-col=\"{ span: 8 }\" :wrapper-col=\"{ span: 12 }\">\r\n            <a-input v-model=\"listQuery.processName\" placeholder=\"请输入作业名称\" />\r\n          </a-form-item>\r\n        </a-col>\r\n\t\t\r\n\t\t<a-col :span=\"6\">\r\n\t\t  <a-form-item label=\"状态\" :label-col=\"{ span: 8 }\" :wrapper-col=\"{ span: 12 }\" >\r\n\t\t\t<a-select defaultValue=\"0\" style=\"width: 100%\" @change=\"\" v-model=\"listQuery.isValid\" placeholder=\"请选择状态\" >\r\n\t\t\t  <a-select-option value=\"1\">禁用</a-select-option>\r\n\t\t\t  <a-select-option value=\"0\">启用</a-select-option>\r\n\t\t\t  \r\n\t\t\t</a-select>\r\n\t\t  </a-form-item>\r\n\t\t</a-col>\r\n\t\t\r\n      \r\n        <a-col :span=\"8\">\r\n          <a-form-item>\r\n\t\t\t  <a-button type=\"primary\" @click=\"getList\">\r\n\t\t\t\t搜索\r\n\t\t\t  </a-button>\r\n\t\t\t  \r\n\t\t  </a-form-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form>\r\n    <div class=\"search-result-list\">\r\n\t\t<div class=\"table-operations\" >\r\n\t\t\t\r\n\t\t\t<a-button type=\"dashed\" block style='margin:0;' @click=\"createlist()\">+ 新增</a-button>\r\n\t\t</div>\r\n      <a-table :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\" :loading='loading' >\r\n        <span slot=\"status_1\" slot-scope=\"status\">\r\n            <a-badge :status=\"status=='运行'?'success':'error'\"/>\r\n            {{status}}\r\n\t\t\t\r\n        </span>\r\n\t\t\r\n\t\t<span slot=\"status_2\" slot-scope=\"status\">\r\n\t\t     <a-badge :status=\"status=='0'?'success':'error'\"/>\r\n\t\t     {{status | statusFilter}}\r\n\t\t\t\t\t\r\n\t\t </span>\r\n\t\t\r\n        <span slot=\"operation\" slot-scope=\"text,recoed\">\r\n\t\t\t<a  @click=\"showlist(recoed)\">查看</a>\r\n\t\t\t<a-divider type=\"vertical\" />\r\n\t\t\t<a-dropdown>\r\n\t\t\t  <a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n\t\t\t\t更多 <a-icon type=\"down\" />\r\n\t\t\t  </a>\r\n\t\t\t  <a-menu slot=\"overlay\">\r\n\t\t\t\t<a-menu-item>\r\n\t\t\t\t  <a href=\"javascript:;\" @click=\"update(recoed)\">修改</a>\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t\t<a-menu-item>\r\n\t\t\t\t  <a href=\"javascript:;\" @click=\"deletList(recoed)\">删除</a>\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t\t\r\n\t\t\t\t<a-menu-item>\r\n\t\t\t\t  <a href=\"javascript:;\" @click=\"updatestatue(recoed)\">{{recoed.isValid | FstatusFilter}}</a>\r\n\t\t\t\t</a-menu-item>\r\n\t\t\t  </a-menu>\r\n\t\t\t</a-dropdown>\r\n\t\t\t\r\n\t\t</span>\r\n\t\t\r\n\r\n      </a-table>\r\n    </div>\r\n        <edit ref='edit' @fresh=\"fresh\"/>\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport {getAllJobsByPage ,delJob,forbidJob,startJob} from '@/api/index.js';\r\nimport edit from './edit';\r\n\r\n  export default {\r\n\tfilters:{\r\n\t\tstatusFilter(status){\r\n\t\t\tconst statusMap={\r\n\t\t\t\t'0':'启用',\r\n\t\t\t\t'1':'禁用'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status]\r\n\t\t},\r\n\t\tFstatusFilter(status){\r\n\t\t\tconst statusMap={\r\n\t\t\t\t'1':'启用',\r\n\t\t\t\t'0':'禁用'\r\n\t\t\t}\r\n\t\t\treturn statusMap[status]\r\n\t\t}\r\n\t},\r\n    data() {\r\n      return {\r\n        expand: false,\r\n\t\tloading:false,\r\n        form: this.$form.createForm(this),\r\n        columns: [\r\n\t\t  { title: '作业名称', dataIndex: 'processName' },\r\n          { title: 'Java类名', dataIndex: 'className' },\r\n\t\t  { title: '组名', dataIndex: 'groupName'},\r\n          { title: '调度表达式', dataIndex: 'cronExpr' },\r\n\t\t  { title: '调度说明', dataIndex: 'scheduleDesc'},\r\n          { title: '状态', dataIndex: 'isValid',align:'center', scopedSlots: { customRender: 'status_2' } },\r\n          { title: '操作',    dataIndex: 'operation',width:'160px',align:'center', scopedSlots: { customRender: 'operation' } }\r\n        ],\r\n        list: [\r\n        ],\r\n        pagination: {\r\n\t\t\t total:0,\r\n             defaultPageSize:5,\r\n             showTotal: total => `共 ${total} 条数据`,\r\n             showSizeChanger:true,\r\n             pageSizeOptions: ['5', '10', '15', '20'],\r\n             onChange:(page, pageSize)=>{\r\n               this.pagechage(page, pageSize);\r\n             },\r\n\t\t\t onShowSizeChange:(current,pageSize)=>{\r\n\t\t\t\t this.pageSizeChange(pageSize);\r\n\t\t\t }\r\n        },\r\n        showVisible: false,\r\n        record:{},\r\n\t\t\r\n\t\tlistQuery:{\r\n\t\t\tprocessName:'',\r\n\t\t\tisValid:'',\r\n\t\t\tpageNum:1,\r\n\t\t\tpageSize:5\r\n\t\t},\r\n\t\t\r\n      }\r\n    },\r\n    components:{\r\n      edit\r\n    },\r\n    computed: {\r\n      count() {\r\n        return this.expand ? 11 : 3\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.getList()\r\n\t},\r\n    methods: {\r\n\t\t//列表展示和搜索\r\n\t\tgetList(){\r\n\t\t\tthis.loading=true\r\n\t\t\t getAllJobsByPage(this.listQuery).then(res=>{\r\n\t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\t//console.log(res)\r\n\t\t\t\t\tthis.list = res.data.extend.list\r\n\t\t\t\t\tthis.pagination.total = res.data.extend.total;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.loading=false\r\n\t\t\t\t\tthis.$message.error(res.data.message)\r\n\t\t\t\t}\r\n\t\t\t })\r\n\t\t},\r\n\t\t\r\n\r\n\t\t  handleReset() {\r\n\t\t\tthis.form.resetFields()\r\n\t\t  },\r\n\r\n\t\t//查看更多\r\n\t\t  showlist(row) {\r\n\t\t\tthis.$refs.edit.ShowDialog(Object.assign({},row));\r\n\t\t  },\r\n\t\t  \r\n\t\t  //新增\r\n\t\t  createlist() {\r\n\t\t\tthis.$refs.edit.CreateDialog();\r\n\t\t  },\r\n\t\t  \r\n\t\t  //删除\r\n\t\t  deletList(row){\r\n\t\t\t  if(row.isValid==0){\r\n\t\t\t\tthis.$info({\r\n\t\t\t\t\ttitle:'提示',\r\n\t\t\t\t\tcontent:'启用状态下不可删除！',\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t  }else{\r\n\t\t\t\tvar _this=this\r\n\t\t\t\tthis.$confirm({\r\n\t\t\t\t  title:'确认删除？',\r\n\t\t\t\t  content:'确认删除本条记录，删除后不可恢复',\r\n\t\t\t\t  okType:'danger',\r\n\t\t\t\t  onOk(){\r\n\t\t\t\t\tdelJob({processId:row.processId}).then(res=>{\r\n\t\t\t\t\t\t//console.log(res)\r\n\t\t\t\t\t\tif(res.data.code=='0000'){\r\n\t\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t  },\r\n\t\t\t\t\t\t\t\t  \r\n\t\t\t\t})\r\n\t\t\t  }\r\n\t\t\t  \r\n\t\t  },\r\n\t\t  \r\n\t\t  //修改\r\n\t\t  update(row){\r\n\t\t\tthis.$refs.edit.UpdateDialog(row);  \r\n\t\t  },\r\n\t\t  \r\n\t\t  //修改状态\r\n\t\t  updatestatue(query){\r\n\t\t\tvar _this=this\r\n\t\t\tvar processId=query.processId\r\n\t\t\tif(query.isValid=='0'){// 0=》 启用    1 =》停用\r\n\t\t\t\tforbidJob({processId:processId}).then(res=>{\r\n\t\t\t\t\tif(res.data.code==\"0000\"){\r\n\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}else{\r\n\t\t\t\tstartJob({processId:processId}).then(res=>{\r\n\t\t\t\t\tif(res.data.code==\"0000\"){\r\n\t\t\t\t\t\t_this.getList()\r\n\t\t\t\t\t\t_this.$message.success(res.data.message)\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_this.$message.error(res.data.message)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t  },\r\n\t\t  \r\n\t\t  //刷新数据\r\n\t\t  fresh(){\r\n\t\t\t  this.getList()\r\n\t\t  },\r\n\t\t   \r\n\t\t  onClose() {\r\n\t\t\tthis.showVisible = false\r\n\t\t  },\r\n\r\n\t\t  toggle() {\r\n\t\t\tthis.expand = !this.expand\r\n\t\t  },\r\n\t\t  pagechage(page, pageSize){\r\n\t\t\tthis.listQuery.pageNum = page;\r\n\t\t\tthis.listQuery.pageSize = pageSize;\r\n\t\t\tthis.getList();\r\n\t\t  },\r\n\t\t  pageSizeChange(pageSize){\r\n\t\t\t  this.listQuery.pageNum = 1;\r\n\t\t\t  this.listQuery.pageSize = pageSize;\r\n\t\t\t  this.getList();\r\n\t\t  }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style>\r\n\r\n  .ant-advanced-search-form {\r\n    padding: 0px 12px;\r\n    border: 1px solid #d9d9d9;\r\n    border-radius: 6px;\r\n  }\r\n\r\n  .ant-advanced-search-form .ant-form-item {\r\n    display: flex;\r\n  }\r\n\r\n  .ant-advanced-search-form .ant-form-item-control-wrapper {\r\n    flex: 1;\r\n  }\r\n\r\n  .components-form-demo-advanced-search .ant-form {\r\n    max-width: none;\r\n    border-radius: 4px;\r\n  }\r\n  .components-form-demo-advanced-search .search-result-list {\r\n    margin-top: 5px;\r\n    text-align: center;\r\n    padding: 4px 12px;\r\n  }\r\n\r\n  #test .ant-row {\r\n    margin: 10px;\r\n  }\r\n\r\n  .table-operations {\r\n    text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n\r\n\r\n</style>\r\n"]}]}