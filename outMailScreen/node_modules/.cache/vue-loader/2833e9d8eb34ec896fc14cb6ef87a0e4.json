{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\role\\index.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\role\\index.vue","mtime":1637304821606},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1640070694039},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\babel-loader\\lib\\index.js","mtime":1640070643981},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport {getRolesByPage,delRole} from '@/api/system.js';\r\nimport edit from './edit';\r\nimport mymenu from './menu';\r\n\r\nimport create from './create';\r\n\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        title:'用户新增',\r\n        expand: false,\r\n        form: this.$form.createForm(this),\r\n        columns: [\r\n          { title: '角色ID', dataIndex: 'id',align:'center' },\r\n          { title: '角色名称', dataIndex: 'name' ,align:'center'},\r\n          { title: '角色描述', dataIndex: 'desc',align:'center' },\r\n          { title: '角色状态', dataIndex: 'status',align:'center',scopedSlots: { customRender: 'status' } },\r\n          { title: '操作', dataIndex: 'operation', width:'160px',align:'center',scopedSlots: { customRender: 'operation' } }\r\n        ],\r\n        list: [\r\n        ],\r\n        pagination: {\r\n             total :0,\r\n             defaultPageSize:5,\r\n             showTotal: total => `共 ${total} 条数据`,\r\n             showSizeChanger:true,\r\n             pageSizeOptions: ['5', '10', '15', '20'],\r\n             onChange:(page, pageSize)=>{\r\n               this.pagechage(page, pageSize);\r\n             }\r\n        },\r\n        query: {\r\n          login: '',\r\n          name: '',\r\n          status: '',\r\n          page:1,\r\n          pageSize:5\r\n        },\r\n        statusmap:{\r\n          '0':'停用',\r\n          '1':'启用'\r\n        },\r\n        showVisible: false,\r\n        record:{}\r\n      }\r\n    },\r\n    components:{\r\n      edit,\r\n      mymenu,\r\n\t  create\r\n    },\r\n    computed: {\r\n      count() {\r\n        return this.expand ? 11 : 3\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.getList()\r\n\t},\r\n    methods: {\r\n      getList() {\r\n\r\n        getRolesByPage().then(response=>{\r\n          this.list = response.data.extend.list\r\n          this.pagination.total=response.data.extend.total;\r\n        }).catch(error=>{\r\n          console.info(\"失败\");\r\n          console.info(error.message);\r\n        });\r\n      },\r\n\r\n      handleReset() {\r\n        this.form.resetFields()\r\n      },\r\n\r\n      //查看更多\r\n  \t\t  showlist(row) {\r\n  \t\t\tthis.$refs.edit.ShowDialog(Object.assign({},row));\r\n  \t\t  },\r\n\r\n  \t\t  //新增\r\n  \t\t  createlist() {\r\n  \t\t\tthis.$refs.create.CreateDialog();\r\n  \t\t  },\r\n        //修改\r\n       update(row){\r\n       this.$refs.create.updateDialog(row);\r\n       },\r\n       //删除\r\n       deletList(row){\r\n         if(row.isValid==0){\r\n         this.$error({\r\n           title:'提示',\r\n           content:'启用状态下不可删除！'\r\n         })\r\n         }else{\r\n         var _this=this\r\n         this.$confirm({\r\n           title:'确认删除？',\r\n           content:'确认删除记录，删除后不可恢复',\r\n           okType:'danger',\r\n           onOk(){\r\n           delRole({id:row.id}).then(res=>{\r\n             if(res.status==200){\r\n               _this.getList()\r\n               _this.$message.success('删除成功！')\r\n             }else{\r\n               _this.$message.error('删除失败！')\r\n             }\r\n           })\r\n           },\r\n         })\r\n         }\r\n\r\n       },\r\n       menuchose(row){\r\n          this.$refs.menu.initDialog(row);\r\n       },\r\n\r\n\t   //刷新数据\r\n\t   fresh(){\r\n\t   \t\t\tthis.getList()\r\n\t   },\r\n\r\n      toggle() {\r\n        this.expand = !this.expand\r\n      },\r\n      pagechage(page, pageSize){\r\n        this.page= page;\r\n        this.pageSize=pageSize;\r\n      }\r\n    }\r\n  }\r\n\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/role","sourcesContent":["<template>\r\n<!--角色管理-->\r\n  <div class=\"commonContent\">\r\n    <a-form class=\"commomForm\"\r\n            :form=\"form\"\r\n            @submit=\"handleSearch\">\r\n      <a-row :gutter=\"24\">\r\n        <a-col :span=\"8\">\r\n          <a-form-item label=\"角色名\" :label-col=\"{ span: 5 }\"\r\n\t\t\t:wrapper-col=\"{ span: 12 }\">\r\n            <a-input v-model=\"query.login\" placeholder=\"角色名\" />\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col :span=\"8\">\r\n          <a-form-item label=\"状态\" :label-col=\"{ span: 5 }\"\r\n\t\t  :wrapper-col=\"{ span: 12 }\">\r\n        <a-select defaultValue=\"0\" v-model=\"query.status\" style=\"width: 100%\" @change=\"handleChange\">\r\n          <a-select-option value=\"0\">禁用</a-select-option>\r\n          <a-select-option value=\"1\">启用</a-select-option>\r\n        </a-select>\r\n          </a-form-item>\r\n        </a-col>\r\n        <a-col span=\"8\" :style=\"{ textAlign: 'right',paddingRight:'20px' }\">\r\n          <a-form-item>\r\n          <a-button type=\"primary\" @click=\"getList\" icon=\"search\">\r\n            搜&nbsp;&nbsp;索\r\n          </a-button>\r\n          <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\" icon=\"redo\">\r\n            重&nbsp;&nbsp;置\r\n          </a-button>\r\n\r\n            </a-form-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form>\r\n    <div class=\"search-result-list\">\r\n      <div class=\"table-operations\">\r\n  <a-button @click=\"createlist\" type=\"dashed\" border style='margin:0;'  :style=\"{width:'100%'}\" >\r\n    <a-icon type=\"plus\"/>\r\n    新增</a-button>\r\n</div>\r\n      <a-table :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n        <span slot=\"status\" slot-scope=\"status\">\r\n             <a-badge :status=\"status=='1'?'success':'error'\" />\r\n            {{statusmap[status]}}\r\n        </span>\r\n\r\n        <span slot=\"operation\" slot-scope=\"text, record\">\r\n        <a  @click=\"showlist(record)\">查看</a>\r\n        <a-divider type=\"vertical\" />\r\n        <a-dropdown>\r\n          <a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n          更多 <a-icon type=\"down\" />\r\n          </a>\r\n          <a-menu slot=\"overlay\">\r\n          <a-menu-item>\r\n            <a href=\"javascript:;\" @click=\"update(record)\">修改</a>\r\n          </a-menu-item>\r\n          <a-menu-item>\r\n            <a href=\"javascript:;\" @click=\"deletList(record)\">删除</a>\r\n          </a-menu-item>\r\n          </a-menu>\r\n        </a-dropdown>\r\n          </span>\r\n\r\n      </a-table>\r\n    </div>\r\n\r\n\r\n\r\n            <edit ref='edit' @fresh=\"fresh\"/>\r\n            <mymenu ref='menu' @fresh=\"fresh\"/>\r\n\r\n\t\t\t<create ref='create' @fresh=\"fresh\"/>\r\n\r\n\r\n  </div>\r\n\r\n</template>\r\n<script>\r\nimport {getRolesByPage,delRole} from '@/api/system.js';\r\nimport edit from './edit';\r\nimport mymenu from './menu';\r\n\r\nimport create from './create';\r\n\r\n\r\n  export default {\r\n    data() {\r\n      return {\r\n        title:'用户新增',\r\n        expand: false,\r\n        form: this.$form.createForm(this),\r\n        columns: [\r\n          { title: '角色ID', dataIndex: 'id',align:'center' },\r\n          { title: '角色名称', dataIndex: 'name' ,align:'center'},\r\n          { title: '角色描述', dataIndex: 'desc',align:'center' },\r\n          { title: '角色状态', dataIndex: 'status',align:'center',scopedSlots: { customRender: 'status' } },\r\n          { title: '操作', dataIndex: 'operation', width:'160px',align:'center',scopedSlots: { customRender: 'operation' } }\r\n        ],\r\n        list: [\r\n        ],\r\n        pagination: {\r\n             total :0,\r\n             defaultPageSize:5,\r\n             showTotal: total => `共 ${total} 条数据`,\r\n             showSizeChanger:true,\r\n             pageSizeOptions: ['5', '10', '15', '20'],\r\n             onChange:(page, pageSize)=>{\r\n               this.pagechage(page, pageSize);\r\n             }\r\n        },\r\n        query: {\r\n          login: '',\r\n          name: '',\r\n          status: '',\r\n          page:1,\r\n          pageSize:5\r\n        },\r\n        statusmap:{\r\n          '0':'停用',\r\n          '1':'启用'\r\n        },\r\n        showVisible: false,\r\n        record:{}\r\n      }\r\n    },\r\n    components:{\r\n      edit,\r\n      mymenu,\r\n\t  create\r\n    },\r\n    computed: {\r\n      count() {\r\n        return this.expand ? 11 : 3\r\n      }\r\n    },\r\n\tcreated(){\r\n\t\tthis.getList()\r\n\t},\r\n    methods: {\r\n      getList() {\r\n\r\n        getRolesByPage().then(response=>{\r\n          this.list = response.data.extend.list\r\n          this.pagination.total=response.data.extend.total;\r\n        }).catch(error=>{\r\n          console.info(\"失败\");\r\n          console.info(error.message);\r\n        });\r\n      },\r\n\r\n      handleReset() {\r\n        this.form.resetFields()\r\n      },\r\n\r\n      //查看更多\r\n  \t\t  showlist(row) {\r\n  \t\t\tthis.$refs.edit.ShowDialog(Object.assign({},row));\r\n  \t\t  },\r\n\r\n  \t\t  //新增\r\n  \t\t  createlist() {\r\n  \t\t\tthis.$refs.create.CreateDialog();\r\n  \t\t  },\r\n        //修改\r\n       update(row){\r\n       this.$refs.create.updateDialog(row);\r\n       },\r\n       //删除\r\n       deletList(row){\r\n         if(row.isValid==0){\r\n         this.$error({\r\n           title:'提示',\r\n           content:'启用状态下不可删除！'\r\n         })\r\n         }else{\r\n         var _this=this\r\n         this.$confirm({\r\n           title:'确认删除？',\r\n           content:'确认删除记录，删除后不可恢复',\r\n           okType:'danger',\r\n           onOk(){\r\n           delRole({id:row.id}).then(res=>{\r\n             if(res.status==200){\r\n               _this.getList()\r\n               _this.$message.success('删除成功！')\r\n             }else{\r\n               _this.$message.error('删除失败！')\r\n             }\r\n           })\r\n           },\r\n         })\r\n         }\r\n\r\n       },\r\n       menuchose(row){\r\n          this.$refs.menu.initDialog(row);\r\n       },\r\n\r\n\t   //刷新数据\r\n\t   fresh(){\r\n\t   \t\t\tthis.getList()\r\n\t   },\r\n\r\n      toggle() {\r\n        this.expand = !this.expand\r\n      },\r\n      pagechage(page, pageSize){\r\n        this.page= page;\r\n        this.pageSize=pageSize;\r\n      }\r\n    }\r\n  }\r\n\r\n</script>\r\n<style>\r\n\r\n  .commomForm {\r\n    padding: 0px 12px;\r\n    --border: 1px solid #d9d9d9;\r\n    --border-radius: 6px;\r\n  }\r\n\r\n  .commomForm .ant-form-item {\r\n    display: flex;\r\n  }\r\n\r\n  .commomForm .ant-form-item-control-wrapper {\r\n    flex: 1;\r\n  }\r\n\r\n  .commonContent .ant-form {\r\n    max-width: none;\r\n    border-radius: 4px;\r\n  }\r\n  .commonContent .search-result-list {\r\n    --margin-top: 5px;\r\n    text-align: center;\r\n    padding: 4px 12px;\r\n  }\r\n\r\n.table-operations {\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n.modeButton{\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #e9e9e9;\r\n  padding: 10px 26px;\r\n  background: #fff;\r\n  text-align: right;\r\n}\r\n</style>\r\n"]}]}