{"remainingRequest":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\mail\\oesbecc\\outMailScreen\\src\\views\\mailCfgInfo\\index.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"D:\\mail\\oesbecc\\outMailScreen\\src\\views\\mailCfgInfo\\index.vue","mtime":1640569316071},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\css-loader\\index.js","mtime":1640070691346},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1640070694148},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\postcss-loader\\src\\index.js","mtime":1640070693882},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1640070690350},{"path":"D:\\mail\\oesbecc\\outMailScreen\\node_modules\\vue-loader\\lib\\index.js","mtime":1640070694148}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\r\n.commomForm {\r\n  padding: 0px 12px;\r\n  --border: 1px solid #d9d9d9;\r\n  --border-radius: 6px;\r\n}\r\n\r\n.commomForm .ant-form-item {\r\n  display: flex;\r\n}\r\n\r\n.commomForm .ant-form-item-control-wrapper {\r\n  flex: 1;\r\n}\r\n\r\n.commonContent .ant-form {\r\n  max-width: none;\r\n  border-radius: 4px;\r\n}\r\n\r\n.commonContent .search-result-list {\r\n  --margin-top: 5px;\r\n  text-align: center;\r\n  padding: 4px 12px;\r\n}\r\n\r\n.table-operations {\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n.modeButton {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #e9e9e9;\r\n  padding: 10px 26px;\r\n  background: #fff;\r\n  text-align: right;\r\n  z-index: 999;\r\n}\r\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgVA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/views/mailCfgInfo","sourcesContent":["<template>\r\n  <div class=\"commonContent\">\r\n    <a-form-model class=\"commomForm\" :form=\"form\" @submit=\"handleSearch\">\r\n      <a-row :gutter=\"24\">\r\n        <!--        <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"邮箱编号\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n                    <a-input v-model=\"listQuery.payload.id\" placeholder=\"邮箱编号\"/>\r\n                  </a-form-model-item>\r\n                </a-col>-->\r\n        <!--        <a-col :span=\"8\">\r\n                  <a-form-model-item label=\"邮箱主题\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n                    <a-input v-model=\"listQuery.payload.title\" placeholder=\"邮箱主题\"/>\r\n                  </a-form-model-item>\r\n                </a-col>-->\r\n        <a-col :span=\"8\">\r\n          <a-form-model-item label=\"邮件类型\" :label-col=\"{ span: 5 }\" :wrapper-col=\"{ span: 12 }\">\r\n            <a-select defaultValue=\"1\" v-model=\"listQuery.payload.mailType\" style=\"width: 100%\"\r\n                      @change=\"handleChange\">\r\n              <a-select-option value=\"0\">生日祝福</a-select-option>\r\n              <a-select-option value=\"1\">感谢信</a-select-option>\r\n            </a-select>\r\n          </a-form-model-item>\r\n        </a-col>\r\n        <a-col :span=\"8\" :style=\"{ textAlign: 'right',paddingRight:'20px' }\">\r\n          <a-form-model-item>\r\n            <a-button type=\"primary\" @click=\"getList\" icon=\"search\">\r\n              搜&nbsp;&nbsp;索\r\n            </a-button>\r\n            <a-button :style=\"{ marginLeft: '8px' }\" @click=\"handleReset\" icon=\"redo\">\r\n              重&nbsp;&nbsp;置\r\n            </a-button>\r\n          </a-form-model-item>\r\n        </a-col>\r\n      </a-row>\r\n    </a-form-model>\r\n    <div class=\"search-result-list\">\r\n      <!--\t\t\t<div class=\"table-operations\">\r\n              <a-button type=\"dashed\" block style='margin:0;' @click=\"createlist()\">+ 新增</a-button>\r\n            </div>-->\r\n      <a-table :columns=\"columns\" :dataSource=\"list\" bordered :pagination=\"pagination\">\r\n\t\t\t\t<span slot=\"mailType\" slot-scope=\"mailType\">\r\n\r\n\t\t\t\t\t{{ statusmap[mailType] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"systemType\" slot-scope=\"systemType\">\r\n\t\t\t\t\t{{ systemTypeMap[systemType] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"channel\" slot-scope=\"channel\">\r\n\t\t\t\t\t{{ channelMap[channel] }}\r\n\t\t\t\t</span>\r\n\r\n        <span slot=\"operation\" slot-scope=\"text, record\">\r\n\r\n\r\n\r\n\t\t\t\t\t<a-divider type=\"vertical\"/>\r\n\r\n         <a @click=\"showlist(record)\">查看</a>\r\n\r\n         <a-divider type=\"vertical\"/>\r\n\r\n          <a-dropdown>\r\n                      <a class=\"ant-dropdown-link\" href=\"javascript:;\">\r\n                        更多\r\n                        <a-icon type=\"down\"/>\r\n                      </a>\r\n                      <a-menu slot=\"overlay\">\r\n                        <a-menu-item>\r\n                          <a href=\"javascript:;\" @click=\"update(record)\">修改</a>\r\n                        </a-menu-item>\r\n                        <a-menu-item>\r\n                          <a href=\"javascript:;\" @click=\"updateImg(record)\">修改背景</a>\r\n                        </a-menu-item>\r\n\r\n                        <a-menu-item>\r\n                          <a href=\"javascript:;\" @click=\"checkSendMail(record)\">邮箱测试</a>\r\n                        </a-menu-item>\r\n                          <a-menu-item>\r\n                          <a href=\"javascript:;\" @click=\"previewSendMail(record)\">预览邮件</a>\r\n                        </a-menu-item>\r\n\r\n                      </a-menu>\r\n                    </a-dropdown>\r\n\t\t\t\t</span>\r\n      </a-table>\r\n    </div>\r\n    <edit ref='edit' @fresh=\"fresh\"/>\r\n\r\n<!--    <a-modal\r\n        class=\"picPreview\"\r\n        title=\"邮件预览\"\r\n        :visible=\"imgListShow\"\r\n        :bodyStyle=\"moduleCenter\"\r\n    >\r\n      <div id=\"test_3\">\r\n        <img :src=\"furl\" ref=\"singleImg\" class=\"originStyle\" />\r\n      </div>\r\n    </a-modal>-->\r\n\r\n\r\n    <div class=\"clearfix\">\r\n\r\n      <a-modal :visible=\"imgListShow\" :footer=\"null\" @cancel=\"handleCancel\">\r\n        <img alt=\"example\" style=\"width: 100%\" :src=\"furl\" />\r\n      </a-modal>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n<script>\r\nimport {\r\n  checkSendMail,\r\n  getPreviewImgById,\r\n  getMailCfgInfoByPage\r\n} from '@/api/mailCfgInfo.js';\r\nimport edit from './edit';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      title: '邮箱配置',\r\n      expand: false,\r\n      imgListShow:false,\r\n      furl:'',\r\n      form: this.$form.createForm(this),\r\n      columns: [{\r\n        title: '邮箱编号',\r\n        dataIndex: 'id',\r\n        align: 'center'\r\n      },\r\n        {\r\n          title: '邮箱主题',\r\n          dataIndex: 'title',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '发件邮箱',\r\n          dataIndex: 'pubMail',\r\n          align: 'center'\r\n        },\r\n\r\n        /*   {\r\n             title: '邮箱密码',\r\n             dataIndex: 'pubMailPass',\r\n             align: 'center'\r\n           },*/\r\n        /*   {\r\n             title: '模板内容',\r\n             dataIndex: 'modelContent',\r\n             align: 'center'\r\n           },*/\r\n\r\n        {\r\n          title: '发送时间',\r\n          dataIndex: 'sendTime',\r\n          align: 'center'\r\n        },\r\n        {\r\n          title: '描述信息',\r\n          dataIndex: 'descx',\r\n          align: 'center'\r\n        },\r\n\r\n        {\r\n          title: '邮件类型',\r\n          dataIndex: 'mailType',\r\n          align: 'center',\r\n          scopedSlots: {\r\n            customRender: 'mailType'\r\n          }\r\n        },\r\n        {\r\n          title: '操作',\r\n          dataIndex: 'operation',\r\n          width: '160px',\r\n          align: 'center',\r\n          scopedSlots: {\r\n            customRender: 'operation'\r\n          }\r\n        }\r\n      ],\r\n      list: [],\r\n      pagination: {\r\n        total: 0,\r\n        defaultPageSize: 5,\r\n        showTotal: total => `共 ${total} 条数据`,\r\n        showSizeChanger: true,\r\n        pageSizeOptions: ['5', '10', '15', '20'],\r\n        onChange: (page, pageSize) => {\r\n          this.pagechage(page, pageSize);\r\n        },\r\n        onShowSizeChange: (current, pageSize) => {\r\n          this.pageSizeChange(pageSize);\r\n        }\r\n      },\r\n      listQuery: {\r\n        payload: {\r\n          id: '',\r\n          name: '',\r\n          status: '',\r\n        },\r\n        page: 1,\r\n        pageSize: 5\r\n      },\r\n      statusmap: {\r\n        '0': '生日祝福',\r\n        '1': '感谢信'\r\n      },\r\n      showVisible: false,\r\n      record: {}\r\n    }\r\n  },\r\n  components: {\r\n    edit\r\n  },\r\n  computed: {\r\n    count() {\r\n      return this.expand ? 11 : 3\r\n    }\r\n  },\r\n  created() {\r\n    this.getList()\r\n  },\r\n  methods: {\r\n    getList() {\r\n      getMailCfgInfoByPage(this.listQuery).then(response => {\r\n        this.list = response.data.extend.list;\r\n        this.pagination.total = response.data.extend.total;\r\n      }).catch(error => {\r\n        console.info(\"失败\");\r\n        console.info(error.message);\r\n      });\r\n    },\r\n\r\n    handleReset() {\r\n      this.listQuery.payload = {\r\n        cityId: '',\r\n        cityName: '',\r\n        status: '',\r\n      }\r\n      //this.form.resetFields()\r\n    },\r\n\r\n    //查看更多\r\n    showlist(row) {\r\n\r\n      this.$refs.edit.ShowDialog(Object.assign({}, row));\r\n\r\n    },\r\n\r\n    //校验邮箱\r\n    checkSendMail(row){\r\n      checkSendMail(row).then(res => {\r\n        //console.log(res)\r\n        if (res.data.code == '0000') {\r\n          this.$message.success(res.data.message)\r\n          this.$emit('fresh')\r\n        } else {\r\n          this.$message.error(res.data.message)\r\n        }\r\n      })\r\n\r\n    },\r\n\r\n    handleCancel(){\r\n      this.imgListShow=false;\r\n    },\r\n\r\n\r\n    previewSendMail(row){\r\n\r\n      //下载文件\r\n      getPreviewImgById({id:row.id}).then(res=>{\r\n        let file = {\r\n          uid: '1',    // 文件唯一标识，建议设置为负数，防止和内部产生的 id 冲突\r\n          name: '背景图片',   // 文件名\r\n          status: 'done', // 状态有：uploading done error removed\r\n        }\r\n        const blob = new Blob([res.data]);\r\n        var href = window.URL.createObjectURL(blob);\r\n        this.furl=href;\r\n        this.imgListShow=true;\r\n       /* file.url = href;\r\n        //this.fileList =[];\r\n        //this.fileList.push(file);\r\n        var downloadElement = document.createElement(\"a\");\r\n        downloadElement.href = href;\r\n        const filename = \"员工信息表1111.png\";\r\n        downloadElement.download = decodeURIComponent(filename);\r\n        document.body.appendChild(downloadElement);\r\n        downloadElement.click();\r\n        document.body.removeChild(downloadElement);\r\n        window.URL.revokeObjectURL(href);*/\r\n      })\r\n\r\n\r\n    },\r\n\r\n\r\n\r\n    updateImg(row) {\r\n      this.$refs.edit.UpdateImgDialog(Object.assign({}, row));\r\n    },\r\n\r\n    //新增\r\n    createlist() {\r\n      this.$refs.edit.CreateDialog();\r\n    },\r\n    //修改\r\n    update(row) {\r\n      this.$refs.edit.UpdateDialog(row);\r\n    },\r\n\r\n    //刷新数据\r\n    fresh() {\r\n      this.getList()\r\n    },\r\n    toggle() {\r\n      this.expand = !this.expand\r\n    },\r\n    pageSizeChange(pageSize) {\r\n      this.listQuery.pageNum = 1;\r\n      this.listQuery.pageSize = pageSize;\r\n      this.getList();\r\n    },\r\n    pagechage(pageNum, pageSize) {\r\n      this.listQuery.pageNum = pageNum;\r\n      this.listQuery.pageSize = pageSize;\r\n      this.getList();\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style>\r\n.commomForm {\r\n  padding: 0px 12px;\r\n  --border: 1px solid #d9d9d9;\r\n  --border-radius: 6px;\r\n}\r\n\r\n.commomForm .ant-form-item {\r\n  display: flex;\r\n}\r\n\r\n.commomForm .ant-form-item-control-wrapper {\r\n  flex: 1;\r\n}\r\n\r\n.commonContent .ant-form {\r\n  max-width: none;\r\n  border-radius: 4px;\r\n}\r\n\r\n.commonContent .search-result-list {\r\n  --margin-top: 5px;\r\n  text-align: center;\r\n  padding: 4px 12px;\r\n}\r\n\r\n.table-operations {\r\n  text-align: right;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.table-operations > button {\r\n  margin-right: 18px;\r\n}\r\n\r\n.modeButton {\r\n  position: absolute;\r\n  left: 0;\r\n  bottom: 0;\r\n  width: 100%;\r\n  border-top: 1px solid #e9e9e9;\r\n  padding: 10px 26px;\r\n  background: #fff;\r\n  text-align: right;\r\n  z-index: 999;\r\n}\r\n</style>\r\n"]}]}